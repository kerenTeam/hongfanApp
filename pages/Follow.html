<!DOCTYPE html>
<html lang="zh-CN">

	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
		<title>好友动态</title>
		<meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no, width=device-width">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-touch-fullscreen" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">
		<meta name="format-detection" content="telephone=no">
		<meta name="format-detection" content="address=no"> 
		<link rel="stylesheet" type="text/css" href="../css/common.css"> 
		<link rel="stylesheet" type="text/css" href="../css/mui.min.css" />
		<link rel="stylesheet" href="../css/reset.css">  
		<link rel="stylesheet" href="../css/fontello.css">  
		<script type="text/javascript" src="../js/jquery.min.js"></script>
		<script src="../js/mui.min.js"></script>
		<script src="../js/app.js"></script>
		<!--引入模板引擎-->
		<script src="../js/artTemplate-native.js"></script>
		<style type="text/css">

		</style>
	</head>
	<style type="text/css">
            .userAvator{  
				width: 0.4rem;  
				height: 0.4rem;  
				border-radius: 50%;
				margin-right: 10px;
			}
			 .follow{
				position: relative;
				background-color: white;
				text-align: center;
				display: flex;
				align-items: center;
				padding:10px 15px;
				justify-content: space-between;
			} 
			 .fllmg{
			 	width: 100%;
			 }
			 
			 .follow:(not:first-child):after{
			 	position: absolute;
			 	content: '';
			 	height: 1px;
			 	left: 10px;
			 	right: 10px;
				-webkit-transform: scaleY(.3);
				background: #CACACA;
				bottom: 0;
			 }
			  
			 .follow:before{
			 	position: absolute;
			 	content: '';
			 	height: 0px;
			 	left: 10px;
			 	right: 10px;
				-webkit-transform: scaleY(.3);
				background: #CACACA;
				top: 0;
			 }
			 .follow button{
				font-size: 0.12rem;
				height: 0.28rem;
				width: 0.7rem; 
			}
			
			.fchidl{
				font-size: 0.12rem;
				/*color: darkgray;*/
			}
			.fchidl img{
				/*vertical-align: middle;*/
			}
			.fchidl>div{
				vertical-align: middle;
				display: inline-block;
			    font-size: 0.11rem;	
			    text-align: left; 
			 }
		 .fchidl>div span{
		 	color: cadetblue;
		 	font-size: 0.11rem;
		 }
		 .fchidl>div small{
		 	vertical-align: middle;
		 	color: #C0C0C0; 
		 }
		 .listt{
		 	background: white;
		 }
		 .timef{
		 	width: 0.1rem;
		 	
		 }
		 .tieCt{
		 	padding: 8px 15px 10px;
		 }
		 .tieCt p span{
		 	color: coral;
		 	margin-right: 5px;
		 }
		 .tieCt img{
		 	width: 0.15rem;  
		 }
		 .tieCt small{
		 	vertical-align: middle;
		 	margin-right: 20px;
		 }
		 .heart {
			background: url(../img/market/web_heart_animation.png);
		    background-position: left;
		    background-repeat: no-repeat;
		    height: 65px;
		    width: 65px;
		    cursor: pointer;
		    position: absolute;
		    left: -40px;
		    top: -21px;
		    background-size: 2900%;
			}
		 .heart:hover,
			.heart:focus {
				background-position: right;
			}
			
			@-webkit-keyframes heartBlast {
				0% {
					background-position: left;
				}
				100% {
					background-position: right;
				}
			}
			
			@keyframes heartBlast {
				0% {
					background-position: left;
				}
				100% {
					background-position: right;
				}
			}
			
			.heartAnimation {
				display: inline-block;
				/*-webkit-animation-name: heartBlast;
				animation-name: heartBlast;*/
				-webkit-animation-duration: .8s;
				animation-duration: .8s;
				-webkit-animation-iteration-count: 1;
				animation-iteration-count: 1;
				-webkit-animation-timing-function: steps(28);
				animation-timing-function: steps(28);
				background-position: right;
			}
			
			.feed p {
				font-family: "Microsoft YaHei", 'Georgia', Times, Times New Roman, serif;
				font-size: 25px;
			}
			
			.feed {
				
				margin-bottom: : 20px;
				position: relative;
			}
			.youpic1{
				position: absolute;left: 0;top: 2px;
			}
			.likeCount {
				font-size: 12px;
				display: inline-block;
				color: #999999;
				vertical-align: middle!important;
			}
			.ffbot{
				display: flex;
				justify-content: flex-end;
				position: relative;margin-bottom: 6px;
			}
			.mui-bar-tab a{
				color: #666;
				display: table-cell;
				vertical-align: bottom;
				text-align: center; 
			}
			#main{
				padding-bottom: 51px;
			}
			
			/*加载*/ 
			#upload {
				text-align: center;
				font-size: 15px;
				line-height: 30px;
				min-height: 40px;
			}
			
			#upload img {
				width: 60px;
				margin-top: -10px;
			}
			.demo-icon{ 
			    font-size: 20px;  
			    position: relative;
			    top: -14px;
			}
			.nameB{font-size: 14px;color: #666; display: inline-block; margin-bottom: 2px; font-weight: 600;}
			.wenzhangP{color: #666;	display: -webkit-box;
	-webkit-box-orient: vertical;
	-webkit-line-clamp: 3;
	overflow: hidden;line-height: 1.3;}
	.youpic2{    position: absolute;left: 20px;top: 3px;font-size: 12px;color: #666;}
	.listt{transition: all 0.2s;}
	</style>

	<body>

		<header class="mui-bar mui-bar-nav">
		    <a class="headbar mui-action-back mui-icon mui-icon-left-nav mui-pull-left normalSize"></a>
		    <h1 class="mui-title" id="confirmbtn1">好友动态</h1>  
		</header>
		<script src="../js/statusBar.js"></script>
		<!--状态栏-->
		<!--<div id="container">-->
		<div id="main">
			<div id="typeNews"></div>
			<script type="text/html" id="typeNewTpl">
				<%if(recommendData.length){%>
					<%for(var i=0;i<=recommendData.length-1;i++){%> 
						<%if(recommendData[i].avatar){%>
							<div class="listt">
								<div class="follow"> 
									<div class="fchidl">
				                       		<img src="<%=recommendData[i].avatar%>" dataurl='<%=recommendData[i].avatar%>' class="userAvator" onclick="gootpage('<%=recommendData[i].user_id%>')" onerror="javascript:this.src='../img/zhaoxiangji.svg';" />
				                        <%}else{%>
				                        	<div class="listt">
												<div class="follow"> 
													<div class="fchidl">
														<img src="../img/10.png" alt="" class="userAvator" onclick="gootpage('<%=recommendData[i].user_id%>')"/>
										<%}%>
									<div> <b class="nameB"><%=recommendData[i].nickname%></b> <br><img src="../img/time.png" class="timef" alt="" /> <small><%=recommendData[i].create_news_time%></small></div>
								</div>
								
							</div>
							<img src="<%=recommendData[i].pic%>" dataurl='<%=recommendData[i].pic%>' onclick="findInfo('<%=recommendData[i].user_id%>','<%=recommendData[i].news_id%>','<%=recommendData[i].avatar%>','<%=recommendData[i].nickname%>')" onerror="javascript:this.src='../img/zhaoxiangji.svg';" class="fllmg" alt="" />
							
							<!--详细信息-->
							<div class="newsinfo" data-newsId="<%=recommendData[i].news_id%>"></div>
							
						</div>
						<%}%> 
					<%}%>	
			</script> 
			<!--详细信息模板-->
			<script type="text/html" id="newsInfoTpl">
				<%if(recommendData){%> 
					<div class="tieCt">
						<div class="ffbot">
							<img class="youpic1" src="../img/grayheart.svg" alt="" /> <small class="youpic2"><%=recommendData.liker.length%></small><!--<img src="../img/graytalking.svg" alt="" /> <small>5</small>--> 
					 		<div class="feed" id="feed<%=recommendData.newsinfodata[0].id%>">
					 			<%if(recommendData.isLike == 1){%>
									<!--红心状态-->
									<div class="heart innerheart heartAnimation" id="like<%=recommendData.newsinfodata[0].news_id%>" data-id="<%=recommendData.newsinfodata[0].news_id%>" data-userid="<%=recommendData.newsinfodata[0].user_id%>" rel="unlike"></div>
								<%}else{%>
									<div class="heart innerheart" id="like<%=recommendData.newsinfodata[0].news_id%>" data-id="<%=recommendData.newsinfodata[0].news_id%>" data-userid="<%=recommendData.newsinfodata[0].user_id%>" rel="like"></div>
									<%}%> 
								<div class="likeCount" style="visibility: hidden;" id="likeCount<%=recommendData.newsinfodata[0].news_id%>">5</div>
							</div>
							<span class="mui-pull-right orp" data-friend_news_id="<%=recommendData.newsinfodata[0].news_id%>" data-to_user_id="<%=recommendData.newsinfodata[0].user_id%>"><img src="../img/market/repeat.svg" style="width: 20px;margin:0 15px 0 10px;"/></span>
							<!--<div class="sharef" style="display: none;">分享弃用
								<img src="../img/market/sharef.png" style="width: 20px;" onclick="shareHref()"/>
							</div>-->
					 	</div>
					 	<p class="wenzhangP">
					 		<%if(recommendData.tags.length){%>
						 		<%for(var j=recommendData.tags.length-1;j>=0;j--){%>
						 			<%if(recommendData.tags[j].tagName){%>
						 				recommendData.tags[j].tagName
						 				<%}%>
						 		<%}%>
						 	<%}%>
						 	<%=recommendData.newsinfodata[0].content%>
					 	<br/><br/>
						
					 	</p>
					 	
					</div> 
				<%}%>
			</script>
			<div class="upload text-center text-xs gray" id="upload"></div>
			<!--底部导航-->
			 
			<nav class="mui-bar mui-bar-tab">
				<a class="subActive">
					<!--<span class="mui-icon mui-icon-eye"></span>-->
					<i class="demo-icon icon-heart"></i>
					<!--<span class="mui-tab-label">关注</span>-->
				</a>
				<a onclick="gopage('find')">
					<!--<span class="mui-icon mui-icon-pengyouquan"></span>-->
					<i class="demo-icon icon-search"></i>
					<!--<span class="mui-tab-label">广场</span>-->
				</a>
				<a onclick="gopage('publish')">
					<!--<span class="mui-icon mui-icon-camera"></span>-->
					<i class="demo-icon icon-camera"></i> 
					<!--<span class="mui-tab-label">消息</span>-->
				</a>
				<a onclick="gopage('message')">
					<!--<span class="mui-icon mui-icon-chat">-->
						<i class="demo-icon icon-comment"></i>
	                	<!--<span class="mui-badge mui-badge-danger">6</span>-->
				</a>
				<a onclick="gopage('centerPage')">
					<!--<span class="mui-icon mui-icon-person"></span>-->
					<i class="demo-icon icon-user"></i>
					<!--<span class="mui-tab-label">个人主页</span>-->
				</a>
			</nav>
			
		</div>
		
		 
	</body>
  <script type="text/javascript"> 
  	
  	var falg = false; 
  	//安卓返回键
//  mui.init({
//      beforeback: function(){
//           backindex();
//          return false; 
//      }
//  });
    //自定义事件
    document.addEventListener('refresh', function() {
		mui.toast('刷新数据');
	})
    function backindex(){
    	falg = true;
        //获得主页面的webview 
        var appIndex = plus.webview.getLaunchWebview();
        var mainweb = plus.webview.getWebviewById('main.html');
        //触发主页面的gohome事件
        mui.fire(appIndex,'gohome',{hrefid:'defaultTab'});
        plus.webview.show(appIndex,"fade-in",500);
        plus.webview.show(mainweb,"fade-in",500); 
        if(plus.webview.getWebviewById('Follow')){
        	plus.webview.getWebviewById('Follow').close();
        }
        if(plus.webview.getWebviewById('message')){
        	plus.webview.getWebviewById('message').close();
        }
        if(plus.webview.getWebviewById('centerPage')){
        	plus.webview.getWebviewById('centerPage').close();
        }
        if(plus.webview.getWebviewById('find')){
        	plus.webview.getWebviewById('find').close();
        }
    	plus.webview.currentWebview().close();
        
    }
  	//导航切换
  	function gopage(page){ 
  		event.preventDefault();
  		function fotrue(){
	  		if(plus.webview.getWebviewById(page)){
	        	plus.webview.show(page,"fade-in",300);
	        	plus.webview.currentWebview().hide();
	        }else{
	        	openview({
					view:page+'.html',
					id:page
				});
	        }
  		}
  		if(page == 'find'){
  			fotrue();
  		}else{
  			if(plus.storage.getItem('myToken')){
  				fotrue();
  			}else{
  				mui.toast('请登录');
				openview({
					view:'login.html'
				});
  			}
  		}
  	}
  	
  	//贴子详情
	function findInfo(userid,newsid,avtar,nickname) {
            openview({
                view: "find/findInfo.html",
                id:"findInfo",
                extrasobj: {
                    userId: userid,newsId:newsid,avtar:avtar,nickName:nickname
                }
            })
        }
 
	
	//关注者 主页
    function gootpage(userId){
    	event.stopPropagation()
    	mui.plusReady(function(){
    		var myuserid = plus.storage.getItem('userid');
    		if(userId == myuserid){
	    		openview({
					view: "centerPage.html",
					extrasobj: {
						idnum: userId
					}
				})
	    	}else{
	    		openview({
					view: "othersPage.html",
					extrasobj: {
						idnum: userId
					}
				})
	    	}
    	})
    	
		
	}
    
    
    mui.plusReady(function(){
    	plus.nativeUI.showWaiting();
    	var oldtoken = plus.storage.getItem('oldToken');
        var myuserid = plus.storage.getItem('userid');
    	
		window.addEventListener('refreshNews',function(event){
				getNews()
		})
		  	
		//下拉刷新
	    downRe(getNews);
    	//获取好友动态列表
    	getNews();
    	
    	function getNews(){ 
    		var Spagenum = 2; //实到页数
			var Ypagenum = 1; //应到页数 
    		var currentPage = 1,numsPerPage = 5; 
    		mui.ajax(serverUrl+"/api/news/newslist",{
    			data:{currentPage:currentPage,numsPerPage:numsPerPage,userid:myuserid,isMyFriendPage:true},
        		dataType:'json',
				type:'post',
				timeout:10000,
				headers:{"token":oldtoken},	 
				success:function(data,type,xhr){
					plus.nativeUI.closeWaiting();
					if(data.errno == 0) { 
						var dataobj = data.data.data; 
						console.log('列表',data);
						if(dataobj.length != 0){
							for(var i=0;i<dataobj.length;i++){ 
								if(/^(\(\d{3,4}\)|\d{3,4}-|\s)?\d{7,14}$/.test(dataobj[i].nickname)){
									dataobj[i].nickname = dataobj[i].nickname.substring(0,3)+"****"+dataobj[i].nickname.substring(7,11)
								}
								if(dataobj[i].avatar){ //处理头像，处理pic
									dataobj[i].avatar = serverimgUrl + JSON.parse(dataobj[i].avatar)[0].picImg;
								}else{
									dataobj[i].avatar = "../img/10.png"
								}
								if(dataobj[i].pic && dataobj[i].pic.indexOf('picImg')>-1){
										dataobj[i].pic = serverimgUrl + JSON.parse(dataobj[i].pic)[0].picImg; 
									}
								var dt = new Date(dataobj[i].create_news_time);
								var date = [
								  [dt.getFullYear(), dt.getMonth() + 1, dt.getDate()].join('-'),
								  [dt.getHours(), dt.getMinutes(), dt.getSeconds()].join(':')
								].join(' ').replace(/(?=\b\d\b)/g, '0'); // 正则补零
								dataobj[i].create_news_time = date
							}  
							var recommendObj = {};
							recommendObj.myUrl = serverimgUrl;
							recommendObj.recommendData = dataobj; 
							document.getElementById("typeNews").innerHTML = template("typeNewTpl", recommendObj);
							plus.nativeUI.closeWaiting();
							var cmlist = document.getElementsByClassName("newsinfo");
								for(var t=0;t<cmlist.length;t++){
									var fuserid = cmlist[t].getAttribute("data-newsId");  
										getInfo(t,fuserid)
								}
						}else{
							document.getElementById("typeNews").innerHTML = "<img src='../img/newsno.svg' style='width: 1rem;margin:auto;display: block;margin-top: 40%;'/><div style='text-align: center;line-height: 1.5;'>快去发布吧</div>"
						}
						mui("#upload")[0].innerHTML = "";
//						上滑加载
						$(window).scroll(function() {　　
							var scrollTop = $(this).scrollTop();　　
							var scrollHeight = $(document).height();　　
							var windowHeight = $(this).height();　　
							if(scrollTop + windowHeight == scrollHeight) {
								if(Spagenum <= data.data.totalPages && Spagenum == Ypagenum + 1) { //当前页小于等于总页数时请求下一页
									mui("#upload")[0].innerHTML = "<img src='../img/balls.svg' />";
									Ypagenum++; //满足加载情况,应到页数+1
									console.log('发起请求,实到' + Spagenum + '页');
									console.log('发起请求,应到' + Ypagenum + '页');
									mui.ajax(serverUrl + '/api/news/newslist', {
										data:{currentPage:Spagenum,numsPerPage:numsPerPage,userid:myuserid,isMyFriendPage:true},
						        		dataType:'json',
										type:'post',
										timeout:10000,
										headers:{"token":oldtoken},	 
										success:function(data,type,xhr){  
											if(data.errno == 0) {
												var dataobj = data.data.data
												if(dataobj.length != 0){
													for(var i=0;i<dataobj.length;i++){
														if(/^(\(\d{3,4}\)|\d{3,4}-|\s)?\d{7,14}$/.test(dataobj[i].nickname)){
															dataobj[i].nickname = dataobj[i].nickname.substring(0,3)+"****"+dataobj[i].nickname.substring(7,11)
														}
														if(dataobj[i].avatar){
															dataobj[i].avatar = serverimgUrl + JSON.parse(dataobj[i].avatar)[0].picImg;
														}else{
															dataobj[i].avatar = "../img/10.png"
														}
														if(dataobj[i].pic && dataobj[i].pic.indexOf('picImg')>-1){
															dataobj[i].pic = serverimgUrl + JSON.parse(dataobj[i].pic)[0].picImg; 
														}
//														dataobj[i].create_time = formatDate(dataobj[i].create_time, "yyyy.MM.dd hh:mm:ss");
												 		var dt = new Date(dataobj[i].create_time);
														var date = [
														  [dt.getFullYear(), dt.getMonth() + 1, dt.getDate()].join('-'),
														  [dt.getHours(), dt.getMinutes(), dt.getSeconds()].join(':')
														].join(' ').replace(/(?=\b\d\b)/g, '0'); // 正则补零
														dataobj[i].create_time = date;
														 
													}
												} 
												var recommendObj = {}
												recommendObj.myUrl = serverimgUrl;
												recommendObj.recommendData = dataobj
												document.getElementById("typeNews").innerHTML += template("typeNewTpl", recommendObj);
												var cmlist = document.getElementsByClassName("newsinfo");
												for(var t=0;t<cmlist.length;t++){
													var fuserid = cmlist[t].getAttribute("data-newsId");  
														getInfo(t,fuserid)
												}
											}
											mui("#upload")[0].innerHTML = "";
											Spagenum++; //加载成功,当前页+1
											console.log('成功+1,实到' + Spagenum);
											console.log('成功+1,应到' + Spagenum);
										},
										error: function(xhr, type, errorThrown) {
											Ypagenum--; //失败是应到-1
											mui.toast("当前网络不好请重试");
											mui("#upload")[0].innerHTML = "";
										}
									});
								} else if(Spagenum == data.data.totalPages + 1) { //当前页不小于等于总页数时请求下一页
									mui("#upload")[0].innerHTML = "到底了";
								}
							}
						}); 
					} else {
						mui("#upload")[0].innerHTML = "";
						
					} 
					//发布者主页
					$(".findUser").click(function(){
						event.stopPropagation();
						openview({
							view: "centerPage.html",
							extrasobj: {
								userId: $(this).attr("data-userId")
							}
						})
					}) 
					
				},
				error:function(xhr,type,errorThrown){
					plus.nativeUI.closeWaiting();
					mui("#upload")[0].innerHTML = "";
					console.log('响应失败  !');
				}
				 
        	}) 
    		
    	}
        function getInfo(t,newId){
        	mui.ajax(serverUrl+"/api/news/newsinfo",{
    			data:{newsid:newId},
        		dataType:'json',
				type:'post',
				timeout:10000,
				headers:{"token":oldtoken},	 
				success:function(data,type,xhr){
					if(data.errno == 0) { 
						if(data.data){ 
							if(data.data.liker){
								for(var i=0;i<data.data.liker.length;i++){
									if(data.data.liker[i].user_id == myuserid){
										data.data.isLike = 1;   
									}
									 
								}
							}
						}
						var recommendObj = {}
							recommendObj.myUrl = serverimgUrl;
							recommendObj.recommendData = data.data;
						document.getElementsByClassName("newsinfo")[t].innerHTML = template("newsInfoTpl", recommendObj);
						plus.nativeUI.closeWaiting();
						//点赞 
						$('.ffbot .heart').eq(t).click(function(){
							event.stopPropagation();
							if(plus.storage.getItem('myToken')){
								var A=$(this).attr("id"); 
								var B=A.split("like"); 
								var messageID=B[1]; 
								var C=parseInt($("#likeCount"+messageID).html()); 
								$(this).css("background-position","");
								var newsId= $(this).attr("data-id"); 
								var likedUserid = $(this).attr("data-userid") 
								var D=$(this).attr("rel"); 
								if(D === 'like') {
									$("#likeCount"+messageID).html(C+1);
									$(this).addClass("heartAnimation").attr("rel","unlike"); 
									
									//点赞评论 
									likeThis(newsId,likedUserid,myuserid,oldtoken) ;
									mui.toast("喜欢成功");
								}else{  
									
									//取消点赞评论
									likeThis(newsId,likedUserid,myuserid,oldtoken) ;
									mui.toast("取消喜欢");
									var nowLm = C-1;
									if(nowLm == 0){
										nowLm ='';
									}
									$("#likeCount"+messageID).html(nowLm);
									$(this).removeClass("heartAnimation").attr("rel","like");
									$(this).css("background-position","left");
									
								}
							}else{
								mui.toast('请登录');
								openview({
									view:'../login.html'
								});
							}
							
							
						});
						//回复跳转
						$(".orp").click(function(){ 
							event.stopPropagation();
							var to_user_id = 0; 
							var to_commit_id = '';
							//帖子id
							var friend_news_id = $(this).attr("data-friend_news_id")
							mui.openWindow({
							    url:"find/repComment.html",
							    id:"repComment",
							    show:{ 
							      aniShow:"slide-in-bottom",//页面显示动画，默认为”slide-in-right“；
							      duration:"300"//页面动画持续时间，Android平台默认100毫秒，iOS平台默认200毫秒；
							    },
							     waiting:{
							      autoShow:false,//自动显示等待框，默认为true
							    },
							    extras:{
							    	to_user_id:to_user_id,friend_news_id:friend_news_id,to_commit_id:to_commit_id
							    }
							})
						})
					}
				},
				error:function(xhr,type,errorThrown){
					plus.nativeUI.closeWaiting(); 
					console.log('响应失败  !');
				}
			})
        }
        
        
        
        //分享===============弃用================
//	    updateSerivces();
//		if (plus.os.name == "Android") {
//			Intent = plus.android.importClass("android.content.Intent");
//			File = plus.android.importClass("java.io.File");
//			Uri = plus.android.importClass("android.net.Uri");
//			main = plus.android.runtimeMainActivity();
//		} 
    })
     /**
	 * 更新分享服务       ===============弃用================
	 */
//	function updateSerivces() {
//		plus.share.getServices(function(s) {
//			shares = {};
//			for (var i in s) {
//				var t = s[i];
//				shares[t.id] = t;
//			}
//		 	outSet("获取分享服务列表成功");
//		}, function(e) {
//			outSet("获取分享服务列表失败：" + e.message);
//		});
//	}
//	function shareAction(id, ex) {
//		console.log('id = ' + id);
//		console.log('ex = ' + ex);
//		console.log('shares[id]' + shares[id]);
//		var s = null;
//		if (!id || !(s = shares[id])) {
//			outLine("无效的分享服务！");
//			return;
//		}
//		if (s.authenticated) {
//			outSet("---已授权---");
//			shareMessage(s, ex);
//		} else {
//			outSet("---未授权---");
//			s.authorize(function() {
//				shareMessage(s, ex);
//			}, function(e) {
//				outLine("认证授权失败");
//			});
//		}
//	}
//	/**
//	 * 发送分享消息
//	 */
//	function shareMessage(s, ex) {
//		var msg = {
//			content: '分享-详情',
////					href: 'http://blog.csdn.net/zhuming3834',
//			title: 'HGDQ-分享测试-title',
//			content: 'HGDQ-分享测试-content',
//			thumbs: ['http://img3.3lian.com/2013/v10/4/87.jpg'],
//			pictures: ['http://img3.3lian.com/2013/v10/4/87.jpg'],
//			extra: {
//				scene: ex
//			}
//		};
//		s.send(msg, function() {
//			outLine("分享成功!");
//		}, function(e) {
//			outLine("分享失败!");
//		});
//	}
//	/**
//	 * 分享按钮点击事件
//	 * 注意这里的这些id值
//	 */
//	function shareHref() {
//		 
//		var ids = [{
//				id: "weixin", 
//				ex: "WXSceneSession"  /*微信好友*/
//			}, {
//				id: "weixin",
//				ex: "WXSceneTimeline" /*微信朋友圈*/
//			}, {
//				id: "qq"   /*QQ好友*/
//			},{
//				id: "tencentweibo"   /*腾讯微博*/
//			},{
//				id: "sinaweibo"  /*新浪微博*/
//			}],
//			bts = [{
//				title: "发送给微信好友"
//			}, {
//				title: "分享到微信朋友圈"
//			}, {
//				title: "分享到QQ"
//			}, {
//				title: "分享到腾讯微博"
//			}, {
//				title: "分享到新浪微博"
//			}];
//		plus.nativeUI.actionSheet({
//				cancel: "取消",
//				buttons: bts
//			},
//			function(e) {
//				var i = e.index;
//				console.log('i = ' + i);
//				if (i > 0) {
//					shareAction(ids[i - 1].id, ids[i - 1].ex);
//				}
//			}
//		);
//	}		
	// 控制台输出日志
	function outSet(msg) {
		console.log(msg);
	}
	// 界面弹出吐司提示
	function outLine(msg) {
		mui.toast(msg);
	}
    
    
  </script>
</html>