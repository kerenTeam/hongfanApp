<!DOCTYPE html>
<html lang="zh-CN">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
		<title>公告列表</title>
		<meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no, width=device-width">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-touch-fullscreen" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">
		<meta name="format-detection" content="telephone=no">
		<meta name="format-detection" content="address=no">
		<link rel="stylesheet" type="text/css" href="../../css/common.css">
		<link rel="stylesheet" type="text/css" href="../../css/index.css">
		<link rel="stylesheet" type="text/css" href="../../css/mui.min.css">
		<link rel="stylesheet" href="../../css/reset.css">
		<script src="../../js/mui.min.js" type="text/javascript" charset="utf-8"></script>
		<script type="text/javascript" src="../../js/jquery.min.js"></script>
		<script type="text/javascript" src="../../js/swiper.min.js"></script>
		<script type="text/javascript" src="../../js/app.js"></script>
		<script type="text/javascript" src="../../js/artTemplate-native.js"></script>
		<style type="text/css">
		/*banner底部导航*/
		.mui-slider-indicator .mui-indicator{
			width: 10px !important;
			height: 10px !important;
			border-radius: 8px;
			background: black;
			margin-right: 5px;
			opacity: 0.3;
			cursor: pointer;
			border: none;
			box-shadow: none;
		}
		.mui-slider-indicator .mui-active.mui-indicator{
			background-color: rgba(245,60,66,0.8) !important;
			box-shadow: none;
			opacity: 1;
			border: none;
		}
		.mui-slider-item{
			position: relative;
			width: 100%;
			padding-top: 42%; 
			overflow: hidden;
		}
		
		.mui-slider-item img{
			position: absolute;
			width: 100%; 
			height:100%;
			top: 0;
		}
			.fr{
				color: #fff !important;
				line-height: 50px;
			}
			.rentingtop{
				background-color: #fff;
			}
			.icon{
				display: inline-block;
				width: 40px;
				height: 40px;
				border-radius: 50%;
				margin: 10px 0;
				float: left;
			}
			.icon-notice{
				background-color: #00A0E9;
			}
			.icon img{
				margin: 7px 5px;
				width: 25px;
				margin-top: -4px;
			}
			.chargeTitle{
				display: inline-block;
				font-size: 18px !important;
				line-height: 80px !important;
				margin-left: 5%;
			}
			.recharge .czhi,.btw{
				padding: 0 5%;
				margin: 0;
			}
			.clearfloat{
				border-bottom: 1px solid #eee;
				margin-bottom: 20px;
			}
			.farm, .farmtc{
				background-color: #fafafa;
			}
			.farm .top, .farm .bottom{
				border-bottom: 1px solid #eee !important;
			}
			.warpthree{
				border-top: 1px solid #eee;
			}
			.line{
				margin-bottom: 0;
				border-bottom: none;
			}
			.btw p{
				font-size: 13px;
				line-height: 15px;
				margin-top: -10px;
			}
			.agree p{
				color: #666;
				padding-top: 30px;
				font-size: 15px !important;
			}
			.textRed{
				color: #f56267;
			}
			button{
				margin: 50px 10%;
				width: 80% !important;
				line-height: 18px !important;
				background-color: #f53c42 !important; 
				color: #fff !important;
				border: none !important;
			}
			.mui-icon-arrowright{
				color: #999 !important;
			}
			
			.recharge .czhi p, .recharge .czhi span{
				line-height: 60px;
				color: #999;
			}
			.recharge .czhi, .btw {
				height: 60px;
				border-bottom: 1px solid #eee;
			}
			.recordDetail{
				width: 60%;
				display: inline-block;
				padding: 10px 20px;
			}
			.recordDetail p{
				width: 100% !important;
				display: inline-block;
				line-height: 20px !important;
			}
			.recordBig{
				font-size: 16px !important;
				color: #666 !important;
			}
			.recordTiny{
				font-size: 12px !important;
			}
			.titleWrap{
				position: absolute;
				bottom: 0;
				width: 100%;
			}
			.titleWrap p{
				line-height: 40px;
				background-color: rgba(0,0,0,0.6) !important;
				width: 100%;
				color: #fff;
				text-indent: 20px;
			}
		</style>
	</head>
	<body>
		<header class="mui-bar mui-bar-nav">
		    <a class="mui-action-back mui-icon mui-icon-left-nav mui-pull-left bigSize"></a>
		    <h1 class="mui-title">公告列表</h1>
		</header>
		<script src="../../js/statusBar.js"></script><!--状态栏-->
		<!--详情内容-->
		<div id="main">
			<div id="scroller">
				<!--轮播图-->
				<div class="mui-slider" id="banner"></div>
				<!--轮播图结束-->
				<!--banner数据渲染-->
				<script type="text/html" id="banner-detail">
					<div class="mui-slider-group mui-slider-loop">
					    <!--支持循环，需要重复图片节点-->
					    <div class="mui-slider-item mui-slider-item-duplicate">
					    	<img src="<%= url %><%= bannerList[bannerList.length-1].bannerPic %>" onerror="javascript:this.src='../../img/market/banner.png';"/>
					    	<div class="titleWrap">
								<p><%=bannerList[bannerList.length-1].name %></p>
							</div>
					    </div>
						<% for(var i=0;i<bannerList.length;i++){ %> 
					    	<div class="mui-slider-item">
					    		<img src="<%= url %><%=bannerList[i].bannerPic %>" onerror="javascript:this.src='../../img/market/banner.png';"/>
					    		<div class="titleWrap">
									<p><%=bannerList[i].name %></p>
								</div>
					    	</div>
					     <% } %>
					    <!--支持循环，需要重复图片节点-->
					    <div class="mui-slider-item mui-slider-item-duplicate">
					    	<img src="<%= url %><%= bannerList[0].bannerPic %>" onerror="javascript:this.src='../../img/market/banner.png';"/>
					    	<div class="titleWrap">
								<p><%= bannerList[0].name %></p>
							</div>
					    </div>
					</div>
					<div class="mui-slider-indicator">
						<div class="mui-indicator mui-active"></div>
						<% for(var i=0;i<bannerList.length-1;i++){ %>
					    	<div class="mui-indicator"></div>
					    <% } %>
		            </div> 
				</script>
			</div>
			<div class="deal">
				<div class="farm">
					<div class="warpthree clearfloat line">
				    	<div class="recharge">
				    		<div class="czhi box-s">
				    			<p>10-02</p>
				    			<div id="Cchoose">
									<div class="icon icon-notice">
										<img src="../../img/theList/notice.png"/>
									</div>
									<div class="recordDetail">
										<p class="recordBig">公告标题</p>
										<p class="recordTiny">发布id</p>
									</div>
				    			</div>
				    		</div>
				    	</div>
				    	<div class="recharge">
				    		<div class="czhi box-s">
				    			<p>10-02</p>
				    			<div id="Cchoose">
									<div class="icon icon-notice">
										<img src="../../img/theList/notice.png"/>
									</div>
									<div class="recordDetail">
										<p class="recordBig">公告标题</p>
										<p class="recordTiny">发布id</p>
									</div>
				    			</div>
				    		</div>
				    	</div>
				    	<div class="recharge">
				    		<div class="czhi box-s">
				    			<p>10-02</p>
				    			<div id="Cchoose">
									<div class="icon icon-notice">
										<img src="../../img/theList/notice.png"/>
									</div>
									<div class="recordDetail">
										<p class="recordBig">公告标题</p>
										<p class="recordTiny">发布id</p>
									</div>
				    			</div>
				    		</div>
				    	</div>
				   </div>
				</div>
			</div>
		</div>
	</body>
	<script type="text/javascript">
		(function(){
			
			$('.recharge').click(function(){
				openview({
					view:"notice.html"
				})
			})
		})();
	</script>
	<!--banner-->
	<script type="text/javascript">
	mui.plusReady(function(){ 
		//获取缓存
		var oldToken = plus.storage.getItem('oldToken');
		plus.nativeUI.showWaiting('加载中 ...',{width:'100px',height:'80px'});//显示等待框
		mui.ajax(serverUrl+'/api/index/banner',{
			data:{banner_type:2},
			dataType:'json',
			type:'post',
			timeout:10000,
			headers:{"token":oldToken},	 
			success:function(data,type,xhr){
//				alert(JSON.stringify(data.data.banner));
				bannerObj={};
				bannerObj.bannerList = eval("("+data.data.banner+")");
				bannerObj.url = serverimgUrl;
				var html = template('banner-detail',bannerObj);
				document.getElementById('banner').innerHTML = html;
				plus.nativeUI.closeWaiting();//关闭等待框
				//轮播图,获得slider插件对象
				var gallery = mui('.mui-slider');
				gallery.slider({
				  	interval:5000//自动轮播周期，若为0则不自动播放，默认为0；
				});
			},
			error:function(xhr,type,errorThrown){
				plus.nativeUI.closeWaiting();//关闭等待框
				mui.toast('响应失败  !');
			}
		}); 
	})
		
	</script>
</html>