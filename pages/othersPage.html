<!DOCTYPE html>
<html lang="zh-CN">

	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
		<title>他人主页</title>
		<meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no, width=device-width">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-touch-fullscreen" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">
		<meta name="format-detection" content="telephone=no">
		<meta name="format-detection" content="address=no"> 
		<!--<link rel="stylesheet" type="text/css" href="../css/common.css">-->
		<link rel="stylesheet" type="text/css" href="../css/index.css">
		<link rel="stylesheet" type="text/css" href="../css/mui.min.css" />
		<link rel="stylesheet" href="../css/reset.css">
		<link rel="stylesheet" href="../css/one.css">
		<link rel="stylesheet" type="text/css" href="../css/find.css" />
		<script type="text/javascript" src="../js/jquery.min.js"></script>
		<script src="../js/mui.min.js"></script>
		<script src="../js/app.js"></script>
		<!--引入模板引擎-->
		<script src="../js/artTemplate-native.js"></script>
		<style type="text/css">

		</style>
	</head>
	<style type="text/css">
	 
	 
		#imgUpload {
			display: none;
		}
		header{
			z-index: 99999;
		}
		#header>*{
			color: white;
			z-index: 9999; 
		} 
		#userBox{
				background-color: #F53C42;
				padding: 0px 0;
			    position: relative;
			    overflow: hidden;
		        max-height: 2.5rem; 
		}
		/*#beijing{position: absolute;z-index:10;width: 100%;height: 100%;top: 0;overflow: hidden; -webkit-filter: blur(5px);}*/
			#mypic1{width: 100%;margin-top: -20%;}
			#beijing2{position: absolute;z-index:1;width: 100%;height: 100%;top: 0;background-color: rgba(255, 0, 0, 0.5);} 
			 
			.userAvator{
				border: 2px solid white;
				position: absolute;
				left: 50%;
				width: 1rem; 
				bottom: 0.5rem;
				height: 1rem; 
				-webkit-transform: translateX(-50%);
				z-index: 9;
				border-radius: 50%;
			}
			.mainInfo{ 
				position: relative;
				padding: 16px 10px 16px 15px;
				display: flex;
				align-items: center;
				justify-content: space-between;
			} 
			 
			.mainInfo button{
				font-size: 0.12rem;
				padding: 4px 8px;
			}
			.follow{
				background-color: white;
				margin: 15px 0;
				margin-bottom:5px;
				text-align: center;
				display: flex;
				align-items: center;
				height: 60px;
				line-height: 1.5;
				justify-content: space-around;
			}
			.follow>div{
				flex-grow:1;
			}
			.fchidl b{
				font-weight: 100;
				font-size: .16rem;
			}
			.fchidl>div{
				color: darkgray;
			}
			.chidlL{
				border-right: 1px solid #EEEEEE;
			}
			 .cmlist{
			 	padding: 18px 15px 11px!important;
			 	background: white;
			 }
			 .ctime{
			 	margin-right: 15px;
			 }
		 .idhiji{
				position: absolute;
				text-align: center;
				bottom: 0.2rem;
				width: 100%;
				color: white;
				z-index: 1;
			}
		.tiename{color: #888;}	
		.ctime{margin-right: 15px;font-size: 12px;}
		.oaright{left: 0 !important;}
		.tiec, .ctime{margin-right: 0 !important;}
		.cmlist{padding: 18px 20px 20px 25px!important;background: white;}
		.noafter:after{height: 0 !important;}
		.cmlist:after{left: 25px !important;}
		.oaright p.tiec{padding: 5px !important;height: 0.6rem;overflow: hidden;background-color: rgba(242, 241, 238, 0.62);}  
		.oaright p.tiec span{display: -webkit-box;
			-webkit-box-orient: vertical;
			-webkit-line-clamp: 2;
			overflow: hidden;position: relative;top: -43px;padding-left: 0.75rem;color: #777;} 
		.tiec img{width: .7rem;}
		.noli{
			position: relative;overflow: hidden;
		}
		.noli:after{
		    position: absolute;
		    right: 0;
		    bottom: 0;
		    left: 15px;
		    height: 1px;
		    content: '';
		    -webkit-transform: scaleY(.2);
		    transform: scaleY(.2);
		    background-color: #c8c7cc;
		}
		.fft b, .follow b{color: #555;}	
	</style>

	<body>

		<header id="header" class="mui-bar mui-bar-transparent">
			<a class="mui-action-back mui-icon mui-icon-left-nav mui-pull-left"></a>
			<h1 class="mui-title">xxxxxx</h1>
		</header>
		<script src="../js/statusBar.js"></script>
		<!--状态栏-->
		<!--<div id="container">-->
		<div id="main">
			<div class="clearfloat box-s box-ss" id="userBox">
	    		<img id="mypic1" src="../img/morentouxiang.jpg"/>
	    		<div id="beijing2"></div> 
	    			<img src="../img/market/atcenter.jpg" class="userAvator"/>
	    			<!--<div class="idhiji">HI集 ID:55667788</div>-->
	    	</div>
	    	<div class="content">
	    		<div class="mainInfo">
	    			<h4><span id="nickname">扉页 </span> <img id="gender" src="../img/woman.svg" alt="" style="width: 0.15rem;"/></h4>
	    			<div>
	    				<button type="button" class="mui-btn mui-btn-warning mui-btn-outlined chat">
							私信
						</button>
						  <button type="button" class="mui-btn mui-btn-success mui-btn-outlined eachF hadF">
							互相关注
						</button>
	    			</div>
	    			
					
	    		</div> 
	    		 
	    	</div>

		</div>
		<div class="follow">
			<div class="fchidl chidlL">
				<b>4</b>
				<div>关注</div>
			</div>
			<div class="fchidl">
				<b>7</b>
				<div>被关注</div>
			</div>
		</div>
	<p style="padding:0 10px 10px;"><small>TA的动态</small></p>
		 <ul class="mui-table-view-striped mui-table-view-condensed">
							 
				<li class="noli cmlist" onclick="findInfo()"> 
					<div class="mui-slider-cell">
						<div class="oa-contact-cell mui-table">
						 	<!--<div class="oa-contact-avatar mui-table-cell cheader">
								<img src="../img/market/ag.jpeg" />
							</div>-->
							<div class="oa-contact-content mui-table-cell oaright oaf noafter">
								<div class="mui-clearfix">
									<div class="oa-contact-position mui-h5 fl tiename">发了贴</div>
								    <div class="oa-contact-position mui-h6 fr ctime">2015-11-19</div>
								</div> 
								<p class="oa-contact-email mui-h5 tiec"> 
									<img src="../img/market/bsl.jpeg" alt="" />	
									<span class="onespan">
										哈哈哈哈哈哈哈哈哈哈哈哈哈哈
									</span>
								</p>
							</div>
						</div>
					</div>
				</li> 
				<li class="noli cmlist" onclick="findInfo()">
					<div class="mui-slider-cell">
						<div class="oa-contact-cell mui-table">
						 	<!--<div class="oa-contact-avatar mui-table-cell cheader">
								<img src="../img/market/ag.jpeg" />
							</div>-->
							<div class="oa-contact-content mui-table-cell oaright oaf noafter">
								<div class="mui-clearfix">
									<div class="oa-contact-position mui-h5 fl tiename">发了贴</div>
								    <div class="oa-contact-position mui-h6 fr ctime">2015-11-19</div>
								</div> 
								<p class="oa-contact-email mui-h5 tiec"> 
									<img src="../img/market/bsl.jpeg" alt="" />	
									<span class="onespan">
										哈哈哈哈哈哈哈哈哈哈哈哈哈哈
									</span>
								</p>
							</div>
						</div>
					</div>
				</li>
				<li class="noli cmlist" onclick="findInfo()"> 
					<div class="mui-slider-cell">
						<div class="oa-contact-cell mui-table">
						 	<!--<div class="oa-contact-avatar mui-table-cell cheader">
								<img src="../img/market/ag.jpeg" />
							</div>-->
							<div class="oa-contact-content mui-table-cell oaright oaf noafter">
								<div class="mui-clearfix">
									<div class="oa-contact-position mui-h5 fl tiename">发了贴</div>
								    <div class="oa-contact-position mui-h6 fr ctime">2015-11-19</div>
								</div> 
								<p class="oa-contact-email mui-h5 tiec"> 
									<img src="../img/market/bsl.jpeg" alt="" />	
									<span class="onespan">
										哈哈哈哈哈哈哈哈哈哈哈哈哈哈
									</span>
								</p>
							</div>
						</div>
					</div>
				</li>
			</ul>
			<div id="" style="padding-bottom:30px;padding-top:20px;background-color: #fff;color: #999;text-align: center;"> 
				没有更多动态了
			</div>
		
	</body>

	<script type="text/javascript">
		
	//滚动监听
	$(window).scroll(function() { 
        // Change this to target a different percentage
        var targetPercentage = 70; 
        //Change this to set the height of your nav bar so it hides properly. If you have a box shadow you may have to adjust this number to be height + shadow distance
        var navBarHeight = 50; 
        //Change this to the ID of the content you are trying to show.
        var targetID = "#header"; 
        //Window Math
        var scrollTo = $(window).scrollTop(), 
            docHeight = $(document).height(),
            windowHeight = $(window).height(); 
        if (scrollTo > navBarHeight) {
            $(targetID).css({
                "background-image": "url(../img/header.png)","background-size":"100%"
            });
        } 
        if (scrollTo < navBarHeight) {
            $(targetID).css({
                "background-image": "none"
            });
        } 
    }).trigger('scroll'); 
    //帖子 详情
    function findInfo(){
		openview({
			view: "find/findInfo.html",
			extrasobj: {
				userId: 1
			}
		})
	}
	//数据处理
	mui.plusReady(function(){
		var oldtoken = plus.storage.getItem('oldToken');
		var myuserid = plus.storage.getItem('userid');
		var otherid = plus.webview.currentWebview().idnum;
		plus.nativeUI.showWaiting('加载中 ...',{width:'100px',height:'80px'});
		var loadnum = 0; 
		//头像名字
		mui.ajax(serverUrl+'/api/useraccount/userinfo',{
			data:{"userid":otherid},
			type:'post',
			timeout:10000,
			headers:{"token":oldtoken},	              				
			success:function(data,type,xhr){
				console.log('获取用户数据返回', data);
				if(data.errno == 0){
					//显示头像
					if(data.data[0].avatar){
						mui('.userAvator')[0].src = serverimgUrl + JSON.parse(data.data[0].avatar)[0].picImg;
						var Avater = serverimgUrl + JSON.parse(data.data[0].avatar)[0].picImg;
					}
					
					//显示昵称
					if(data.data[0].nickname != ' '){ 
						if(data.data[0].nickname.indexOf('null') == -1){
							mui('#nickname')[0].innerHTML = data.data[0].nickname;
						}else{
							mui('#nickname')[0].innerHTML = data.data[0].phone;
						}
					}else{
						mui('.denluzhuce')[0].innerHTML = data.data[0].phone;
					}
					//显示性别
					if(data.data[0].gender == '男'){
						mui('#gender')[0].src = '../img/man.svg';
						mui('#beijing2')[0].style.backgroundColor = 'rgba(140, 159, 191, 0.67)';
					}else if(data.data[0].gender == '女'){
						mui('#gender')[0].src = '../img/woman.svg';
					}
					
					//私信
					 mui('.chat')[0].addEventListener('tap',function(){
					 	//我的请求头像  
						mui.ajax(serverUrl+'/api/useraccount/userinfo',{
							data:{"userid":myuserid},
							type:'post',
							timeout:10000,
							headers:{"token":oldtoken},	              				
							success:function(data,type,xhr){
								console.log('获取用户数据返回'+JSON.stringify(data));
								if(data.errno == 0){
									//显示头像
									if(data.data[0].avatar){
									    myAvatar =  serverimgUrl + JSON.parse(data.data[0].avatar)[0].picImg;
							            openview({
											view:'find/chat.html',
											extrasobj:{'fromUserId':otherid,'fromAvater':Avater,'myavatar':myAvatar}
										});
									} 
									
								}else{
									mui.toast('获取用户信息失败'); 
									console.log(data.errmsg);
								}
							},
							error:function(xhr,type,errorThrown){
								console.log('获取用户数据,响应失败');
							}
						});	 
						
					});
				}else{
					mui.toast('获取用户信息失败'); 
					console.log(data.errmsg); 
				}
				loadnum++;
			},
			error:function(xhr,type,errorThrown){
				loadnum++;
				mui.toast('获取用户信息响应失败');
				console.log('获取用户数据,响应失败');
			}
		});
		
		//关遮罩
		var time1 = setInterval(function(){ 
			console.log(loadnum);
			if(loadnum == 1){
		  		plus.nativeUI.closeWaiting();	
		  		clearInterval(time1);
			}
		},100)
	})
    //关注 粉丝 
    $(".fchidl:first-child").on("tap",function(){
    	openview({
				view:'find/follow.html' 
			});
    })
	$(".fchidl:last-child").on("tap",function(){
    	openview({
				view:'find/followed.html' 
			});
    })
		
	$(".hadF").click(function(){
  		event.stopPropagation()
  		$(this).toggleClass(" mui-btn-outlined");
  		 if($(this).hasClass("mui-btn-outlined")){
  		 	if($(this).hasClass("eachF")){
  		 		$(this).html("互相关注")
  		 	}else{
  		 		$(this).html("已关注")
  		 	}
  		 	
  		 }else{
  		 	$(this).html(" + 关注")
  		 }
  	})
	
	</script>

</html>