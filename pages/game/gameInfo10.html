<!DOCTYPE html>
<html lang="zh-CN">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
		<title>游戏娱乐</title>
		<meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no, width=device-width">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-touch-fullscreen" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">
		<meta name="format-detection" content="telephone=no">
		<meta name="format-detection" content="address=no">
		<link rel="stylesheet" type="text/css" href="../../css/common.css">
		<link rel="stylesheet" type="text/css" href="../../css/index.css">
		<link rel="stylesheet" type="text/css" href="../../css/mui.min.css"/>
		<link rel="stylesheet" href="../../css/reset.css">
		<!--<link rel="stylesheet" type="text/css" href="../../css/localHost.css"/>--> 
		<script src="../../js/mui.min.js" type="text/javascript" charset="utf-8"></script>
		<script src="../../js/app.js" type="text/javascript" charset="utf-8"></script>
		<script src="../../js/artTemplate-native.js" type="text/javascript" charset="utf-8"></script>
	</head>
	<style type="text/css">
		.activityIcon{
			width: 0.3rem;
			margin: 0 5px 0 15px;
			vertical-align: middle;
		}
		dl.list{
			border: none;
		}
		.acleft img{ 
			width: 0.7rem; 
			
		}
		.acright{  
			font-size: 0.18rem; 
    		left: 25%;
    		position: absolute;
    		top: 50%;
    		line-height: 0.2rem;
    		-webkit-transform: translateY(-50%);
    		transform:translateY(-50%) ;
		}
		.ddafter{ 
			padding:12px 15px 25px 15px;
			position: relative;  
		}
	 .briefgame{ 
	 	line-height: 1.5;
	 	font-size: 0.13rem; 
	 	margin:3% 0;
	 	
	 }
		.aclist{
			padding: 0 auto 0.05rem auto;
		}
	 	.gameName{ 
		    display: inline-block;
		    white-space: nowrap;
		    overflow: hidden;
		 }
		 .aclist{
		 	position: relative;
		 }
		 .mui-btn-outlined{ 
		 	border-color: coral;
		 	font-size: 0.14rem;
		 	color: coral!important;
		 	padding: 6px;
		 	margin: 5% 0; 
		 	border-radius: 180px;
		 } 
		 .npbk{
		 	    overflow-x: scroll; 
			  	 width: 100vw; 
			    white-space: nowrap;
			 	position: relative;
			 	left: 50%;
			 	right: 50%;
			 	margin-left: -50vw;
			 	margin-right: -50vw;
		 }
		 small{
		 	font-size: 0.12rem;
		 }
		 article img{
		 	margin: 0 2% 5% 0;
		    width: 50%;
		    display: inline-block; 
		    white-space: nowrap;
		 }
		 article img:first-child{
		 	margin-left: 15px;
		 }
		 article img:last-child{
		 	margin-right: 15px;
		 }
		 .anz{
		 	    position: fixed;
			    bottom: 10px;
			    width: 50%;
			    left: 50%;
			    margin-left: -25%;
		 }
		 .gameBi{
		 	font-size: 0.14rem;
		 	line-height: 0.2rem;
		 	margin-bottom: 0.2rem;
		 }
		 .gameBi label{
		 	color: gray;
		 	margin-right: 5px;
		 	display: inline;
		 }
		 big{
		 	font-size: 0.18rem;
		 	font-weight: 600;
		 }
		 #downGame{
		 	background-color: white!important;
		    /* width: 100%!important; */
		    position: fixed;
		    z-index: 99;
		    left: 0;
		    right: 0;
		    bottom: 0;
		    height: 0.5rem;
		 }
		 #gameOver{
		 	display: none;
		 	text-align: center;
		 	position:fixed ;
		 	color: black;
		 	bottom: 0.1rem;
		 	left: 0.35rem;
		 }
	</style>
	<body>
		<header class="mui-bar mui-bar-nav">
		    <a class="mui-action-back mui-icon mui-icon-left-nav mui-pull-left bigSize"></a>
		    <h1 class="mui-title">游戏娱乐</h1>
		</header>	
		<script src="../../js/statusBar.js"></script><!--状态栏-->
		<div id="container">		
			<div id="main"> 
				<div style="background-color: white;padding-bottom: 12px;" id="Alist">
					
					 <div class="ddafter">
						<div class="mui-row aclist"> 
								 <div class="fl acleft">
								 	<img src="http://img.wdjimg.com/mms/icon/v1/a/e8/028863ee3f5af7ff969bf08c84666e8a_256_256.png" alt="" />
								 </div>
								 <div class="acright"> 
								 	<div class="gameName">莉比小公主之环游世界</div>
								 	<br />
								 	<div class="gray"><small>游戏平台:Android 2.3.3 以上</small></div>
								 	<div class="gray"><small>更新时间:2016-06-30</small></div>
								 </div>  
						</div>
						<button type="button" class="mui-btn mui-btn-block mui-btn-outlined">游戏详情</button>
					<article> 
						<div class="npbk">
							<img src="http://img.wdjimg.com/mms/screenshot/7/41/5d1a35bd62f94607b8bf99ef4f7c6417_512_320.jpeg" alt="" />
							<img src="http://img.wdjimg.com/mms/screenshot/0/8d/b4ed59ef34630d35109d7e1d877138d0_512_320.jpeg" alt="" />
							<img src="http://img.wdjimg.com/mms/screenshot/b/bd/3ae60eb84d3cc87e7fe2d86ac6454bdb_512_320.jpeg" alt="" />
							<img src="http://img.wdjimg.com/mms/screenshot/2/c7/12bdd80ec839206c6033e44aa5db7c72_512_320.jpeg" alt="" />
							<img src="http://img.wdjimg.com/mms/screenshot/0/50/fc2908a799e26888992d48d55b4f2500_512_320.jpeg" alt="" />
						</div>
						<ul class="gameBi">
							<li><label>大小</label> 70.04M</li>
							<li><label>版本</label> 1.6</li>
							<li><label>时间</label> 2016-06-30</li>
						</ul>
					</article>
					
					<article><big>游戏简介</big><br/><p class="briefgame">
						嗨，小伙伴，跟莉比公主一起环游世界去吧！
						^_^关注Libii官方微信公众号:libiigame
						随时掌握最新游戏动态、活动资讯^_^
						这可是莉比公主第一次去各地拜访朋友们，有点小激动呢！出发之前先把她装扮得美美的，然后收拾好行李，就可以坐上轮船出发喽！嗯…先去哪个国家呢？是先去尝尝甜甜的蛋糕和香醇的咖啡，还是做个漂亮的发型呢？哇，还有时尚的脸绘和美味无比的菜肴等着你们呢。完成小游戏就有“爱心”奖励，用它可以兑换精美物品！漫漫旅途趣味多多，小朋友，和莉比一起快乐出发吧！
						游戏特色：
						- 多种故事剧情，旅途精彩不停
						- 海量精致装扮，打造完美公主
						- 亲手烹制各国美食，寓教于乐
						- 收集爱心，兑换精美物品
						- 丰富的拍照场景，记录美好时光
						- 栩栩如生的海岛令你身临其境
						关于我们：
						Libii Game一直致力于为孩子们打造寓教于乐并充满想象力的互动性游戏，而今已拥有超过三亿的下载量并且仍与日俱增。我们将不懈努力为他们创造出更多丰富有趣的内容。
					</p></article>
					
					 </div> 
					</div>
			</div> 
		</div> 
		<div id="downGame">
			<div id="gameOver">
				<span class="mui-icon mui-icon-close"></span>
				<div style="font-size: 0.1rem;">取消</div>
			</div>
			<button id="download" onclick="createDownload(this)" type="button" class="mui-btn mui-btn-success anz">安装  70.04M</button> 
			<small id="jindu"></small>
		</div>
	</body>
	<script type="text/javascript">
		//如果是ios则隐藏下载按钮
		if(/android/i.test(navigator.userAgent)) { //判断为android  
		} else if(/ipad|iphone/i.test(navigator.userAgent)) { //判断为ios  
			mui('#downGame')[0].remove();
		} else { //pc端访问  
			mui('#downGame')[0].remove();
		}
		mui.plusReady(function() {
			
			function GetNetWorkState() {
				var NetStateStr = '未知';
				var types = {};
				types[plus.networkinfo.CONNECTION_UNKNOW] = "未知";
				types[plus.networkinfo.CONNECTION_NONE] = "未连接网络";
				types[plus.networkinfo.CONNECTION_ETHERNET] = "有线网络";
				types[plus.networkinfo.CONNECTION_WIFI] = "WiFi网络";
				types[plus.networkinfo.CONNECTION_CELL2G] = "2G蜂窝网络";
				types[plus.networkinfo.CONNECTION_CELL3G] = "3G蜂窝网络";
				types[plus.networkinfo.CONNECTION_CELL4G] = "4G蜂窝网络";
				NetStateStr = types[plus.networkinfo.getCurrentType()];
		
				return NetStateStr;
			};
		 
			// 创建下载任务
			window.createDownload = function() {
				
				
				
				if(GetNetWorkState()=="未连接网络" || GetNetWorkState()=="未知"){
					plus.nativeUI.alert("未联网状态，不能下载");
					return;
				}else if(GetNetWorkState()=="有线网络" || GetNetWorkState()=="3G蜂窝网络" || GetNetWorkState()=="2G蜂窝网络" || GetNetWorkState()=="4G蜂窝网络"){
					 mui.confirm('非WiFi环境下确定下载？', '提示', ['取消', '确定'], function(e) {
						if(e.index == 1) { 
							startDownload()
						} 

					})
				}else{
					startDownload()
				}
				
				

				}
			//建立下载任务
			function startDownload(){
					document.getElementById("jindu").style.display = "block"
					document.getElementById("download").innerHTML = "安装中";
					document.getElementById("gameOver").style.display = "inline-block";
					var dtask = plus.downloader.createDownload("http://apk.hiapk.com/appdown/com.libii.princessvacation?em=5&p=android&f_name=%E8%8E%89%E6%AF%94%E5%B0%8F%E5%85%AC%E4%B8%BB%E4%B9%8B%E7%8E%AF%E6%B8%B8%E4%B8%96%E7%95%8C", {}, function(d, status) {
						// 下载完成
						if(status == 200) { 
							
							d.filename = d.filename;
							
							document.getElementById("download").onclick = function() {
								plus.runtime.openFile(d.filename);
							}
						} else {
							plus.nativeUI.alert("下载失败");
						}
					});
					//dtask.addEventListener( "statechanged", onStateChanged, false );
					range("http://apk.hiapk.com/appdown/com.libii.princessvacation?em=5&p=android&f_name=%E8%8E%89%E6%AF%94%E5%B0%8F%E5%85%AC%E4%B8%BB%E4%B9%8B%E7%8E%AF%E6%B8%B8%E4%B8%96%E7%95%8C")
					dtask.start();
			}
			//取消下载任务
			document.getElementById("gameOver").onclick = function() {
				plus.downloader.clear(); 
				stop();
				document.getElementById("download").innerHTML = "安装 70.04M";
				          	document.getElementById("jindu").style.display="none";

				document.getElementById("gameOver").style.display = "none";
			}

			var req = new XMLHttpRequest();

			function range(url) {
           var percentComplete;
				// report progress events
				req.addEventListener("progress", function(event) {
					if(event.lengthComputable) {
						 percentComplete = parseFloat((event.loaded / event.total)*100).toFixed(0);
						document.getElementById("jindu").innerHTML = "(" + percentComplete + "%)";
							if(document.getElementById("jindu").innerHTML == "(100%)") { 
								document.getElementById("download").innerHTML = "打开"; 
							    document.getElementById("gameOver").style.display = "none";
								 
							} 
					}
				}, false); 
				req.open("GET", url);

				req.send(); 
                
			}

			function stop() {
				req.abort(); // 终止XMLHttpRequest对象 

				window.stop();
			}
		});
	 
	</script>
</html>
