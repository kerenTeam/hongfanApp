<!DOCTYPE html>
<html lang="zh-CN">

	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
		<title>游戏娱乐</title>
		<meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no, width=device-width">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-touch-fullscreen" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">
		<meta name="format-detection" content="telephone=no">
		<meta name="format-detection" content="address=no">
		<link rel="stylesheet" type="text/css" href="../../css/common.css">
		<link rel="stylesheet" type="text/css" href="../../css/index.css">
		<link rel="stylesheet" type="text/css" href="../../css/mui.min.css" />
		<link rel="stylesheet" href="../../css/reset.css">
		<!--<link rel="stylesheet" type="text/css" href="../../css/localHost.css"/>-->
		<script src="../../js/mui.min.js" type="text/javascript" charset="utf-8"></script>
		<script src="../../js/app.js" type="text/javascript" charset="utf-8"></script>
		<script src="../../js/artTemplate-native.js" type="text/javascript" charset="utf-8"></script>
	</head>
	<style type="text/css">
		.activityIcon {
			width: 0.3rem;
			margin: 0 5px 0 15px;
			vertical-align: middle;
		}
		
		dl.list {
			border: none;
		}
		
		.acleft img {
			width: 0.7rem;
		}
		
		.acright {
			font-size: 0.18rem;
			left: 25%;
			position: absolute;
			top: 50%;
			line-height: 0.2rem;
			-webkit-transform: translateY(-50%);
			transform: translateY(-50%);
		}
		
		.ddafter {
			padding: 12px 15px 25px 15px;
			position: relative;
		}
		
		.briefgame {
			line-height: 1.5;
			font-size: 0.13rem;
			margin: 3% 0;
		}
		
		.aclist {
			padding: 0 auto 0.05rem auto;
		}
		
		.gameName {
			display: inline-block;
			white-space: nowrap;
			overflow: hidden;
		}
		
		.aclist {
			position: relative;
		}
		
		.mui-btn-outlined {
			border-color: coral;
			font-size: 0.14rem;
			color: coral!important;
			padding: 6px;
			margin: 5% 0;
			border-radius: 180px;
		}
		
		.npbk {
			overflow-x: scroll;
			width: 100vw;
			white-space: nowrap;
			position: relative;
			left: 50%;
			right: 50%;
			margin-left: -50vw;
			margin-right: -50vw;
		}
		
		small {
			font-size: 0.12rem;
		}
		
		article img {
			margin: 0 2% 5% 0;
			width: 50%;
			display: inline-block;
			white-space: nowrap;
		}
		
		article img:first-child {
			margin-left: 15px;
		}
		
		article img:last-child {
			margin-right: 15px;
		}
		
		.anz {
			position: fixed;
			bottom: 10px;
			width: 50%;
			left: 50%;
			margin-left: -25%;
		}
		
		.gameBi {
			font-size: 0.14rem;
			line-height: 0.2rem;
			margin-bottom: 0.2rem;
		}
		
		.gameBi label {
			color: gray;
			margin-right: 5px;
			display: inline;
		}
		
		big {
			font-size: 0.18rem;
			font-weight: 600;
		}
		
		#downGame {
			background-color: white!important;
			/* width: 100%!important; */
			position: fixed;
			z-index: 99;
			left: 0;
			right: 0;
			bottom: 0;
			height: 0.5rem;
		}
		
		#gameOver {
			display: none;
			text-align: center;
			position: fixed;
			color: black;
			bottom: 0.1rem;
			left: 0.35rem;
		}
		
		
	</style>

	<body>
		<header class="mui-bar mui-bar-nav">
			<a class="mui-action-back mui-icon mui-icon-left-nav mui-pull-left bigSize"></a>
			<h1 class="mui-title">游戏娱乐</h1>
		</header>
		<script src="../../js/statusBar.js"></script>
		<!--状态栏-->
		<div id="container">
			<div id="main">
				<div style="background-color: white;padding-bottom: 12px;" id="Alist">

					<div class="ddafter">
						<div class="mui-row aclist">
							<div class="fl acleft">
								<img src="http://img.wdjimg.com/mms/icon/v1/c/e6/d9b220b711d88ef27f84405725c02e6c_256_256.png" alt="" />
							</div>
							<div class="acright">
								<div class="gameName">会说话的安吉拉</div>
								<br />
								<div class="gray"><small>游戏平台:Android 4.1 以上</small></div>
								<div class="gray"><small>更新时间:2016-03-14</small></div>
							</div>
						</div>
						<button type="button" class="mui-btn mui-btn-block mui-btn-outlined">游戏详情</button>
						<article>
							<div class="npbk">
								<img src="http://img.wdjimg.com/mms/screenshot/6/b3/3d20e44bdc69614d456994cebb4ffb36_320_570.jpeg" alt="" />
								<img src="http://img.wdjimg.com/mms/screenshot/a/39/79910c731b168dc31862b155b0aa639a_320_570.jpeg" alt="" />
								<img src="http://img.wdjimg.com/mms/screenshot/2/54/d978e3cc6fd9ec1fcace444e81872542_320_570.jpeg" alt="" />
								<img src="http://img.wdjimg.com/mms/screenshot/6/85/dc4f4811578953f8d60eb30b66782856_320_570.jpeg" alt="" />
								<img src="http://img.wdjimg.com/mms/screenshot/5/a5/1c446bd8d6bfecf0e562b16738450a55_320_570.jpeg" alt="" />
							</div>
							<ul class="gameBi">
								<li><label>大小</label> 44.91M</li>
								<li><label>版本</label> 2.6</li>
								<li><label>时间</label> 2016-03-14</li>
							</ul>
						</article>

						<article><big>游戏简介</big><br/>
							<p class="briefgame">
								浪漫、时尚、魔幻之都 —— 快来巴黎与“会说话的安吉拉”一起分享吧。惊喜多多，你最好有点心理准备。;) 享用惊艳礼物，挑选最新的时尚造型，抿一口魔幻鸡尾酒，体味奇特的瞬间。别忘记录制并与好友们分享“会说话的安吉拉”那些傻乎乎的视频。对了，留意小鸟 —— 你绝对想不到飞过身边的会是什么。 游戏说明:-在全世界最时尚的都市，与“会说话的安吉拉”一起欢乐吧
							</p>
						</article>

					</div>
				</div>
			</div>
		</div>
		<div id="downGame">
			<div id="gameOver">
				<span class="mui-icon mui-icon-close"></span>
				<div style="font-size: 0.1rem;">取消</div>
			</div>
			<button id="download" onclick="createDownload(this)" type="button" class="mui-btn mui-btn-success anz">安装  44.91M</button>
			<small id="jindu"></small>
		</div>
	</body>
	<script type="text/javascript">
		//如果是ios则隐藏下载按钮
		if(/android/i.test(navigator.userAgent)) { //判断为android  
		} else if(/ipad|iphone/i.test(navigator.userAgent)) { //判断为ios  
			mui('#downGame')[0].remove();
		} else { //pc端访问  
			mui('#downGame')[0].remove();
		}
		mui.plusReady(function() {
			
			function GetNetWorkState() {
				var NetStateStr = '未知';
				var types = {};
				types[plus.networkinfo.CONNECTION_UNKNOW] = "未知";
				types[plus.networkinfo.CONNECTION_NONE] = "未连接网络";
				types[plus.networkinfo.CONNECTION_ETHERNET] = "有线网络";
				types[plus.networkinfo.CONNECTION_WIFI] = "WiFi网络";
				types[plus.networkinfo.CONNECTION_CELL2G] = "2G蜂窝网络";
				types[plus.networkinfo.CONNECTION_CELL3G] = "3G蜂窝网络";
				types[plus.networkinfo.CONNECTION_CELL4G] = "4G蜂窝网络";
				NetStateStr = types[plus.networkinfo.getCurrentType()];
		
				return NetStateStr;
			};
		 
			// 创建下载任务
			window.createDownload = function() {
				
				
				
				if(GetNetWorkState()=="未连接网络" || GetNetWorkState()=="未知"){
					plus.nativeUI.alert("未联网状态，不能下载");
					return;
				}else if(GetNetWorkState()=="有线网络" || GetNetWorkState()=="3G蜂窝网络" || GetNetWorkState()=="2G蜂窝网络" || GetNetWorkState()=="4G蜂窝网络"){
					 mui.confirm('非WiFi环境下确定下载？', '提示', ['取消', '确定'], function(e) {
						if(e.index == 1) { 
							startDownload()
						} 

					})
				}else{
					startDownload()
				}
				
				

				}
			//建立下载任务
			function startDownload(){
					document.getElementById("jindu").style.display = "block"
					document.getElementById("download").innerHTML = "安装中";
					document.getElementById("gameOver").style.display = "inline-block";
					var dtask = plus.downloader.createDownload("http://apk.hiapk.com/appdown/com.outfit7.talkingangelafree?em=5&p=android&f_name=%E4%BC%9A%E8%AF%B4%E8%AF%9D%E7%9A%84%E5%AE%89%E5%90%89%E6%8B%89", {}, function(d, status) {
						// 下载完成
						if(status == 200) { 
							
							d.filename = d.filename;
							
							document.getElementById("download").onclick = function() {
								plus.runtime.openFile(d.filename);
							}
						} else {
							plus.nativeUI.alert("下载失败");
						}
					});
					//dtask.addEventListener( "statechanged", onStateChanged, false );
					range("http://apk.hiapk.com/appdown/com.outfit7.talkingangelafree?em=5&p=android&f_name=%E4%BC%9A%E8%AF%B4%E8%AF%9D%E7%9A%84%E5%AE%89%E5%90%89%E6%8B%89")
					dtask.start();
			}
			//取消下载任务
			document.getElementById("gameOver").onclick = function() {
				plus.downloader.clear(); 
				stop();
				document.getElementById("download").innerHTML = "安装";
				          	document.getElementById("jindu").style.display="none";

				document.getElementById("gameOver").style.display = "none";
			}

			var req = new XMLHttpRequest();

			function range(url) {
           var percentComplete;
				// report progress events
				req.addEventListener("progress", function(event) {
					if(event.lengthComputable) {
						 percentComplete = parseFloat((event.loaded / event.total)*100).toFixed(0);
						document.getElementById("jindu").innerHTML = "(" + percentComplete + "%)";
							if(document.getElementById("jindu").innerHTML == "(100%)") { 
								document.getElementById("download").innerHTML = "打开"; 
							    document.getElementById("gameOver").style.display = "none";
								 
							} 
					}
				}, false); 
				req.open("GET", url);

				req.send(); 
                
			}

			function stop() {
				req.abort(); // 终止XMLHttpRequest对象 

				window.stop();
			}
		});
	</script>

</html>