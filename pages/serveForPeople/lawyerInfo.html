<!DOCTYPE html>
<html lang="zh-CN">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
		<title>律师详情</title>
		<meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no, width=device-width">
		<meta name="apple-mobile-web-app-capable" competency="yes">
		<meta name="apple-touch-fullscreen" competency="yes">
		<meta name="apple-mobile-web-app-status-bar-style" competency="black">
		<meta name="format-detection" competency="telephone=no">
		<meta name="format-detection" competency="address=no">
		<link rel="stylesheet" type="text/css" href="../../css/common.css"> 
		<link rel="stylesheet" type="text/css" href="../../css/mui.min.css"/>
		<link rel="stylesheet" href="../../css/reset.css">
		<!--<link rel="stylesheet" type="text/css" href="../../css/localHost.css"/>-->
		<script src="../../js/mui.min.js" type="text/javascript" charset="utf-8"></script>
		<script src="../../js/app.js"></script>
		<script src="../../js/artTemplate-native.js"></script>
		<style type="text/css">
			#main{
				padding-bottom: 60px;
			}
			.lawyer{
				display: flex;
				display: -webkit-flex;
				padding: 15px;
				align-items: center;
				position: relative;
			}
			 .lawyer:after{
			 	position: absolute;
	            content: '';
	            height: 1px;
	            left: 10px;
	            right: 10px;
	            -webkit-transform: scaleY(.05);
	            -webkit-transform-origin: 0 bottom;
	            transform-origin: 0 bottom;
	            background: #000;
	            bottom: 0;

			 }
		 .lyavator{
		 	width: 0.7rem;
		 	height: 0.7rem;
		 	border-radius: 50%;
		 	margin-right: 15px;
		 }
		 .lawyerCmt{
		 	line-height: 2.5;
		 }
		 .lawyerCmt big{
		 	font-size: 0.16rem
		 }
		 .lawyerCmt img{
		 	width: 0.15rem;
		 	/*float: right;*/
		 }
		 .case{
		 	padding: 15px; 
		 }
		 .case h5{
		 	color: black;
		 	margin-bottom: 10px;
		 }
		 .case span.mui-badge{
		 	border-radius: 2px;
		 	background-color: cornflowerblue;
		 }
		 .white{
		 	background: white;
		 }
		 .lawyerBt{
		 	position: relative;
		 	padding: 15px;
		 }
		 .lawyerBt h5{
		 	color: black;
		 	font-size: 0.16rem;
		 }
		 .lawyerBt p{
		 	word-break: break-all;
		 	color: #333333;
		 	text-indent: 2em;
		 	margin-top: 15px;
		 	line-height: 1.5;
		 }
		 .lcmt{
		 	text-align: right; 
		 }
		 .lcmt img{ 
		 	width: 0.2rem;
		 }
		  .lcmt span{
		 	vertical-align: middle; 
		 }
		</style>
	</head>
	<body>
		<header class="mui-bar mui-bar-nav">
		    <a class="mui-action-back mui-icon mui-icon-left-nav mui-pull-left bigSize"></a>
		    <h1 class="mui-title"></h1>
		</header>
		<script src="../../js/statusBar.js" type="text/javascript" charset="utf-8"></script><!--状态栏-->
		<div id="main">
			<div id="helper"></div>
			<script type="text/html" id="helper-detail">
				<div class="white">
				 	<div class="lawyer">
				 		<% if(helpLi.headPic == null || helpLi.headPic == ''){ %>
								<img src="../../img/10.png"/>
								
							<% }else{ %> 
								<img src="<%=myUrl%><%= helpLi.headPic %>" onerror="javascript:this.src='../../img/zhaoxiangji.svg';" class="lyavator"/>
							<% } %> 
					 	<div class="lawyerCmt">
					 		<div><big><%=helpLi.name%></big>
					 			<% if(helpLi.period && helpLi.period != " "){%>
					 				<span style="font-size: 12px;margin-left: 5px;" class="mui-badge mui-badge-danger"><%= helpLi.period%>年</span>
					 			<% }%>
					 			<% for(var j = 0;j < helpLi.star;j++){ %><img src="../../img/market/star.png" alt="" /><% } %>
					 		</div>
					 		<div><%=helpLi.sex%> <%=helpLi.age%>岁&nbsp;&nbsp;&nbsp;<%=helpLi.occupation%>&nbsp;&nbsp;&nbsp;<%=helpLi.education%></div>
					 	</div>
					 </div> 
					 <div class="case">
					 	<% for(var j = 0;j < helpLi.competency.length;j++){ %>
								<span class="mui-badge mui-badge-primary"><%= helpLi.competency[j] %></span>
							<% } %>
					  </div>
				</div>
				<br />
				<div class="white">
				 	<div class="lawyerBt">
					 	 <h5>简介</h5>
					 	 <p><%= helpLi.info %></p>
					 </div> 
					 <!--<div class="case lcmt">
					<img src="../../img/center/hudong.svg" alt="" />  <span>评价 5</span>
					 </div>-->
				</div>
				<div class="renting-footer renting-footertwo clearfloat">
					<ul>
						<li><a onclick="helpMe(<%=helpLi.helper_id%>)">发送案件</a></li>
					</ul>
				</div>	
			</script>	
			<img src="../../img/unllfabu.svg" id="nodisplay" style="width: 1rem;margin: auto;display: none;margin-top: 20%;"/>
		</div>
	</body>
	<script type="text/javascript">
		function helpMe(helpId){
			if(plus.storage.getItem('myToken')){
				openview({
					view:"sendCase.html",
					extrasobj:{helpId:helpId}
				})
			}else{
				mui.toast('请登录');
				openview({
					view:'../login.html'
				})
			}
		}
		mui.plusReady(function(){
			var lawyerid = plus.webview.currentWebview().lawyerid;
			var lawyername = plus.webview.currentWebview().lawyername;
			var oldtoken = plus.storage.getItem('oldToken');
			mui('.mui-title')[0].innerHTML = lawyername;
			plus.nativeUI.showWaiting();
			//律师团
			mui.ajax(serverUrl+'/api/localservice/searchlawyer',{
				dataType:'json',
				type:'post',
				timeout:10000,
				headers:{"token":oldtoken},	 
				success:function(data,type,xhr){ 
					console.log('律师详情',data);
					if(data.errno == 0 ){
						var curdata = {};
						if(data.data.length){
							for(var i = 0;i < data.data.length;i++ ){
								data.data[i].competency = eval("("+data.data[i].competency+")");
								if(data.data[i].helper_id == lawyerid){
									curdata = data.data[i];
								}
							}
							var helpObj = {};
						 		helpObj.myUrl = serverimgUrl;
								helpObj.helpLi = curdata;
								console.log("当前律师",curdata); 
							var html = template('helper-detail',helpObj);
							document.getElementById('helper').innerHTML = html;
						}else{ 
							document.getElementById('nodisplay').style.display="block"
						}
						 
					}
					
					plus.nativeUI.closeWaiting();//关闭等待框
					 
				},
				error:function(xhr,type,errorThrown){
					mui.toast('当前网络不好,请重试');
				}
			}); 
			
		})
	</script>
	 
</html>
