<!DOCTYPE html>
<html lang="zh-CN">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
		<title>活动报名</title>
		<meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no, width=device-width">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-touch-fullscreen" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">
		<meta name="format-detection" content="telephone=no">
		<meta name="format-detection" content="address=no">
		<link rel="stylesheet" type="text/css" href="../../css/common.css">
		<link rel="stylesheet" type="text/css" href="../../css/index.css">
		<link rel="stylesheet" type="text/css" href="../../css/mui.min.css"/>
		<link rel="stylesheet" href="../../css/reset.css">
		<link href="../../css/mui.picker.min.css" rel="stylesheet" />
		<link href="../../css/mui.poppicker.css" rel="stylesheet" />
		
		<style type="text/css">
			input{
				text-align: right!important;
			}
		.mui-bar-nav.mui-bar .mui-icon {
			margin-left: -2px;
		}
			.data ul li i{
				position: absolute;
				right: 10px;
			}
			.data ul li .shuru{
				margin-bottom: 0;
			}
			.chooseAd{
				text-align: left !important;
			}
			.mui-bar-nav{
				box-shadow: none;
			}
			.mui-bar{
				height: 50px;
			}
			.mui-title,.mui-icon{
				line-height: 50px;
			}
			.mui-bar .mui-icon{
				padding: 0;
			}
			.hasManyCitytwo .baocun{
				font-size: 15px;margin: 0;
			}
			.hasManyCitytwo .header-tit{font-size: 15px;left: 46%;}
			#main{
				margin-top: 50px;
			}
			.toggle--off{
				background-color: #f53c42 !important;
			}
			
			.mui-btn {
				font-size: 16px;
				padding: 8px;
				margin: 3px;
			}
			#showCityPicker3 ,#showCityPicker4{
				position: absolute;
				right: 10px;
				line-height: 49px;
				border: none;
				padding: 0;
				text-align: right;
				width: 75%;
				background-color: rgba(0,0,0,0);
			}
			.data ul li span{
				line-height: 49px;
			}
			.ui-alert{
				padding: 0;
				line-height: 50px;
				text-align: left;
				float: right;
				width: 76%;
				font-size: 16px;
				color: #666;
			}
			.data ul li .shuru{
				line-height: 16px;
				text-align: left;
				width: 76%;
				height: 49px;
			}
			.data ul li{
				height: 50px;
			}
			.plist ul li{
				border-bottom: 1px solid #efeff4;
			}
			.address-btn{
				border-top: none;
				border-bottom: none;
				margin-top: 4%;
			}
			.add-address .textare{
				border-bottom: none;color: #666;
			}
			.mobile{
				margin: 50px 0 0 0;
			}
			
			.mui-bar-nav.mui-bar .mui-icon,.mui-title,#theSearch{
				color: #fff;
			}
			.mui-bar-nav{
				box-shadow: none;
			}
			.dealcard, .cinemacard{
				margin-top: 45px;
			}
			.dealcard .dealcard-img img{
				height: 60px;
				overflow: hidden;
			}
			.mui-icon-camera:before {
				content: '\e301'
			}
			@font-face {
				font-family:Muiicons;font-weight:400;font-style:normal;src:url(fonts/mui.ttf) format('truetype')
			}
			.mui-icon {
				font-family: Muiicons;
				font-size: 24px;
				font-weight: 400;
				font-style: normal;
				line-height: 1;
				display: inline-block;
				text-decoration: none;
				-webkit-font-smoothing: antialiased
			}
			.mui-icon.mui-right:before {
				float: right;
				padding-left: .2em
			}
			*{
			    -webkit-box-sizing: border-box;
			            box-sizing: border-box;
			    outline: none;
			    -webkit-tap-highlight-color: transparent;
			    -webkit-tap-highlight-color: transparent;
			}
			.mui-btn{
			    font-size: 14px;
			    font-weight: 400;
			    line-height: 1.42;
			    position: relative;
			    display: inline-block;
			    margin-bottom: 0;
			    padding: 6px 12px;
			    cursor: pointer;
			    -webkit-transition: all;
			            transition: all;
			    -webkit-transition-timing-function: linear;
			            transition-timing-function: linear;
			    -webkit-transition-duration: .2s;
			            transition-duration: .2s;
			    text-align: center;
			    vertical-align: top;
			    white-space: nowrap;
			    background-clip: padding-box;
			}
			.mui-btn-outlined.mui-btn-primary, .mui-btn-outlined.mui-btn-blue{
			    color: #f53c42;
			    border: 1px solid #f53c42;
			}
			.mui-btn-block{
			    font-size: 18px;
			    display: block;
			    width: 100%;
			    margin-bottom: 10px;
			    padding: 15px 0;
			}
			.mui-table-view{
			    position: relative;
			    margin-top: 0;
			    margin-bottom: 0;
			    padding-left: 0;
			    list-style: none;
			}
			.mui-table-view-cell{
			    position: relative;
			    overflow: hidden;
			    padding: 11px 15px;
			    -webkit-touch-callout: none;
			}
			.mui-table-view-cell > a:not(.mui-btn){
			    position: relative;
			    display: block;
			    overflow: hidden;
			    margin: -11px -15px;
			    padding: inherit;
			    white-space: nowrap;
			    text-overflow: ellipsis;
			    color: inherit;
			}
			.mui-popover{
			    position: absolute;
			    z-index: 999;
			    display: none;
			    width: 280px;
			    -webkit-transition: opacity .3s;
			            transition: opacity .3s;
			    -webkit-transition-property: opacity;
			            transition-property: opacity;
			    -webkit-transform: none;
			            transform: none;
			    opacity: 0;
			    border-radius: 7px;
			    background-color: #f7f7f7;
			    -webkit-box-shadow: 0 0 15px rgba(0, 0, 0, .1);
			            box-shadow: 0 0 15px rgba(0, 0, 0, .1);
			}
			.mui-popover .mui-popover-arrow{
			    position: absolute;
			    z-index: 1000;
			    top: -25px;
			    left: 0;
			    overflow: hidden;
			    width: 26px;
			    height: 26px;
			}
			.mui-popover .mui-popover-arrow:after{
			    position: absolute;
			    top: 19px;
			    left: 0;
			
			    width: 26px;
			    height: 26px;
			
			    content: ' ';
			    -webkit-transform: rotate(45deg);
			            transform: rotate(45deg);
			
			    border-radius: 3px;
			    background: #f7f7f7;
			}
			.mui-popover .mui-popover-arrow.mui-bottom{
			    top: 100%;
			    left: -26px;
			
			    margin-top: -1px;
			}
			.mui-popover .mui-popover-arrow.mui-bottom:after{
			    top: -19px;
			    left: 0;
			}
			.mui-popover.mui-popover-action{
			    bottom: 0;
			    width: 100%;
			    -webkit-transition: -webkit-transform .3s, opacity .3s;
			            transition:         transform .3s, opacity .3s;
			    -webkit-transform: translate3d(0, 100%, 0);
			            transform: translate3d(0, 100%, 0);
			    border-radius: 0;
			    background: none;
			    -webkit-box-shadow: none;
			            box-shadow: none;
			}
			.mui-popover.mui-popover-action .mui-popover-arrow{
			    display: none;
			}
			.mui-popover.mui-popover-action.mui-popover-bottom{
			    position: fixed;
			}
			.mui-popover.mui-popover-action.mui-active{
			    -webkit-transform: translate3d(0, 0, 0);
			            transform: translate3d(0, 0, 0);
			}
			.mui-popover.mui-popover-action .mui-table-view .mui-table-view-cell:after{
			    position: absolute;
			    right: 0;
			    bottom: 0;
			    left: 0;
			    height: 1px;
			    content: '';
			    -webkit-transform: scaleY(.5);
			            transform: scaleY(.5);
			}
			.mui-popover.mui-popover-action .mui-table-view small{
			    font-weight: 400;
			    line-height: 1.3;
			    display: block;
			}
			.mui-popover.mui-active{
			    display: block;
			    opacity: 1;
			}
			.mui-popover .mui-bar ~ .mui-table-view{
			    padding-top: 44px;
			}
			.mui-backdrop{
			    position: fixed;
			    z-index: 998;
			}
			header{
				height: 50px !important;
			}
			header h1,.mui-bar-nav.mui-bar .mui-icon, .mui-title, #theSearch{
				line-height: 50px !important;
				padding: 0;
			}
			.sure {
				margin-top: 10px;
			}
			.sure button{
				width: 95%;
				background-color: #f53c42;
				color: #fff;
				border: none;
				height: 42px;
				font-size: 16px;
			}
			.mui-btn-primary{
				background-color: #fff !important;
				width: 95%;
			}
			#container{
				margin-bottom: 30px;
			}
			/*图片上传*/
	    	*{margin: 0;padding: 0;box-sizing: border-box;}
	    	.clearfix:after {content: ""; display: block; clear:both;}
	    	.uppics{overflow-y: hidden;background-color: #fff;;}
	    	.uppics div.onepic{height: 120px;padding: 0 !important;padding-top: 31px !important;font-size: 14px;}
		    .uppics div.onepic img{width: 50px;}
		    .uppics div.onepic input{width: 0;height: 0;position: absolute;outline: none;}
		    #uppics2{text-align: left;white-space: nowrap;overflow-x: scroll;}
		    #uppics2 div{display: inline-block;width: 120px;height:120px;vertical-align: middle;position: relative;text-align: center;padding: 10px;margin-right: 6px;}
		    #uppics2 .onepic{width: 120px;}
		    #uppics2 .picimg{width: 100%;}
		    .picimg1{width: 25px;position: absolute;right: 0px;top: 2px;}
		    
		   	/*免责申明同意*/
		   	.disclaimer{
				line-height: 50px;
				padding-left: 5%;
				margin-top: 10px;
		   	}
		   	.disclaimer p{
		   		color: #f53c42;
		   		font-size: 14px;
		   		text-align: center;
		   		width: 100%;
		   	}
		   	#main{
		   		background-color: #EFEFF4;
		   	}
		   	.gray{
		   		color: #999 !important;
		   	}
		   	#cityResult3{
		   		text-align: right;
		   		padding-right: 10px;
		   	}
    </style>
	</head>

	<body>
		<!--header star-->
		<header class="mui-bar mui-bar-nav">
		    <a class="headbar mui-action-back mui-icon mui-icon-left-nav mui-pull-left normalSize"></a>
		    <h1 class="mui-title" id="confirmbtn1">活动报名</h1> 
		    <a href="javascript:;" style="line-height: 50px;color:white;" class="fr baocun">发送</a>
		</header>
		<script src="../../js/statusBar.js"></script><!--状态栏-->
		
		<!--上传图片结束-->
		<div id="container" style="margin-top:50px">
		    <div id="main" class="mui-clearfix add-address">
		    	<div id="thisAddLi"></div>
		    	<div class="plist clearfloat data">
					<ul>
						<li class="clearfloat">
							<a href="#">
								<p class="fl">姓名
								</p>
								<input type="text" class="fr shuru Ynull" value="" name="" id="Bname" placeholder="点击填写(必填)"/>
							</a>
						</li> 
						<li class="clearfloat" id="Bclass">
							<a href="javascript:;" id="mapAddress">
								<p class="fl">性别</p>
								<button id='showCityPicker3' type='button'><span class="mui-icon mui-icon-arrowdown"></span></button>
								<div id='cityResult3' class="ui-alert">点击选择</div>
							</a>
						</li>
						<li class="clearfloat">
							<a href="#">
								<p class="fl">籍贯
								</p>
								<input type="text" class="fr shuru Ynull" name="" id="PlaceBirth" placeholder="点击填写"/>
							</a>
						</li> 
						<li class="clearfloat">
							<a href="#">
								<p class="fl">电话
								</p>
								<input type="text" class="fr shuru Ynull" name="" id="phone" placeholder="点击填写(必填)"/>
							</a>
						</li>
						<li class="clearfloat">
							<a href="#">
								<p class="fl">邮箱
								</p>
								<input type="text" class="fr shuru Ynull" name="" id="email" placeholder="点击填写"/>
							</a>
						</li>
						<li class="clearfloat">
							<a href="#">
								<p class="fl">QQ号码
								</p>
								<input type="text" class="fr shuru Ynull" name="" id="qqnum" placeholder="点击填写"/>
							</a>
						</li>
						<li class="clearfloat">
							<a href="#">
								<p class="fl">身份证号
								</p>
								<input type="text" class="fr shuru Ynull" name="" id="idcard" placeholder="点击填写"/>
							</a>
						</li>
						<li class="clearfloat">
							<a href="#">
								<p class="fl">通讯地址
								</p>
								<input type="text" class="fr shuru Ynull" name="" id="addressmy" placeholder="点击填写"/>
							</a>
						</li>
						<li class="clearfloat">
							<a href="#">
								<p class="fl">政治面貌
								</p>
								<input type="text" class="fr shuru Ynull" name="" id="PoliticalStatus" placeholder="点击填写"/>
							</a>
						</li>
						<li class="clearfloat">
							<a href="#">
								<p class="fl">志愿者经历
								</p>
								<input type="text" class="fr shuru Ynull" name="" placeholder="有或无" id="yesorno"/>
							</a>
						</li> 
					  <div style="background: #f2f1ee;height: 10px;"></div>
						 
						 <div style="background: #f2f1ee;height: 10px;"></div>
						<li class="clearfloat">
							<a href="#">
								<p class="">个人特长</p>
							</a>
						</li>
						<textarea name="" rows="3" id="Binfo0" placeholder="个人才艺、擅长科目等" class="textare box-s Ynull" value=""></textarea>
						 
					     <div style="background: #f2f1ee;height: 10px;"></div>
					    <li class="clearfloat">
							<a href="#">
								<p class="">活动经历</p>
							</a>
						</li>
						<textarea name="" rows="4" id="Binfo1" placeholder="请描述一下你的活动经历" class="textare box-s Ynull" value=""></textarea>
						 <div style="background: #f2f1ee;height: 10px;"></div>
					    <li class="clearfloat">
							<a href="#">
								<p class="">对活动的感想及展望</p>
							</a>
						</li>
						<textarea name="" rows="4" id="Binfo2" placeholder="畅所欲言吧" class="textare box-s Ynull" value=""></textarea>
					</ul>
				</div>
				 
		    </div>
		</div>
<script src="../../js/mui.min.js"></script>
<script src="../../js/app.js"></script>
<script src="../../js/mui.picker.min.js"></script>
<script src="../../js/mui.poppicker.js"></script>
<script type="text/javascript">
	 
	//上传部分
	var reg_phone = /^1((3|4|5|8|7){1}\d{1}|70)\d{8}$/;//手机号正则
	mui.plusReady(function(){
		var myuserid = parseInt(plus.storage.getItem('userid'));
		var oldtoken = plus.storage.getItem('oldToken'); 
		var acid = plus.webview.currentWebview().acid; 
		
		//请求用户信息
		mui.ajax(serverUrl+'/api/useraccount/userinfo',{
			data:{userid:myuserid},
			type:'post',
			timeout:10000,
			headers:{"token":oldtoken},
			success:function(data,type,xhr){
				if(data.errno == 0 && data.data[0].phone){
				 	 mui('#phone')[0].value = data.data[0].phone;
				}
			}
		});
		var reg_phone = /^1((3|4|5|8|7){1}\d{1}|70)\d{8}$/;//手机号正则
		mui('.baocun')[0].onclick = function(){
			var Ynulls = mui('#Bname')[0],
			phone = mui('#phone')[0],
			PoliticalStatus = mui('#PoliticalStatus')[0].value,
			cityResult3 = mui('#cityResult3')[0].innerHTML,
			PlaceBirth = mui('#PlaceBirth')[0].value,
			yesorno = mui('#yesorno')[0].value, 
			idcard = mui('#idcard')[0].value,
			addressmy = mui('#addressmy')[0].value,
			email = mui('#email')[0].value, 
			qqnum = mui('#qqnum')[0].value,
			Binfo0 = mui('#Binfo0')[0].value,
			Binfo1 = mui('#Binfo1')[0].value,
			Binfo2 = mui('#Binfo2')[0].value; 
			
			if(!Ynulls.value){
				mui.toast('请填写你的姓名'); 
			}else if(!phone || !reg_phone.test(phone.value)){
				 mui.toast('请填写正确的电话');
			}else{//开始上传数据 
				
				mui.ajax(serverUrl+'/api/localservice/joincommunityservice',{
					data:{
						user_id: myuserid, 
						name: Ynulls.value,
						phoneNumber: phone.value, 
						politicalGroup: PoliticalStatus,
						gender: cityResult3,
						birthPlace: PlaceBirth,
						joined: yesorno,
						IDNumber : idcard,
						Address: addressmy,
						email: email,
						qq: qqnum,
						Specialty: Binfo0,
						history: Binfo1,
						expecting: Binfo2
					},
					dataType:'json',//服务器返回json格式数据
					type:'post',//HTTP请求类型
					timeout:10000,//超时时间设置为10秒；
					headers:{"token":oldtoken},
					success:function(data){
						console.log('报名',data);
						if(data.errno == 0){
							mui.toast('报名成功');
							mui.back(); 
						}
					},
					error:function(xhr,type,errorThrown){
						mui.toast('当前网络不好，请重试');
					}
				});				

			}
			
		}
	})
</script>
<script>
	(function($, doc) {
		$.init();
		$.ready(function() {
			//分类选择
			var userPicker = new $.PopPicker();
			userPicker.setData([{
				text: '男'
			}, {
				text: '女'
			}]);
			var showUserPickerButton = doc.getElementById('showCityPicker3');
			var userResult = doc.getElementById('cityResult3');
			showUserPickerButton.addEventListener('tap', function(event) {
				userPicker.show(function(items) {
					userResult.innerText = items[0].text;
				});
			}, false);
		});
	})(mui, document);
</script>
</body>

</html>