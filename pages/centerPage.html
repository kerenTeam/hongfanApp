<!DOCTYPE html>
<html lang="zh-CN">

	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
		<title>个人主页</title>
		<meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no, width=device-width">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-touch-fullscreen" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">
		<meta name="format-detection" content="telephone=no">
		<meta name="format-detection" content="address=no"> 
		<!--<link rel="stylesheet" type="text/css" href="../css/common.css">-->
		<link rel="stylesheet" type="text/css" href="../css/index.css">
		<link rel="stylesheet" type="text/css" href="../css/mui.min.css" />
		<link rel="stylesheet" href="../css/reset.css">
		<link rel="stylesheet" href="../css/one.css">
		<link rel="stylesheet" type="text/css" href="../css/find.css" />
		<script type="text/javascript" src="../js/jquery.min.js"></script>
		<script src="../js/mui.min.js"></script>
		<script src="../js/app.js"></script>
		<!--引入模板引擎-->
		<script src="../js/artTemplate-native.js"></script>
		<style type="text/css">

		</style>
	</head>
	<style type="text/css">
	p{
		padding: 0px 10px;
	}
		#imgUpload {
			display: none;
		}
		#header>*{
			color: white;
		} 
		#userBox{
				background-color: #F53C42;
				padding: 0px 0;
			    position: relative;
			    overflow: hidden;
		}
		/*#beijing{position: absolute;z-index:10;width: 100%;height: 100%;top: 0;overflow: hidden; -webkit-filter: blur(5px);}*/
			#mypic1{width: 100%;margin-top: -20%;}
			#beijing2{position: absolute;z-index:1;width: 100%;height: 100%;top: 0;background-color: rgba(255, 0, 0, 0.5);} 
			 
			.userAvator{
				border: 2px solid white;
				position: absolute;
				left: 50%;
				width: 1rem; 
				bottom: 0.5rem;
				height: 1rem; 
				-webkit-transform: translateX(-50%);
				z-index: 99;
				border-radius: 50%;
			}
			.mainInfo{ 
				position: relative;
				padding: 16px 10px 16px 15px;
				display: flex;
				align-items: center;
				justify-content: space-between;
			} 
			 .mainInfo:after{
			 	position: absolute;
			 	content: '';
			 	height: 1px;
			 	left: 10px;
			 	right: 10px;
				-webkit-transform: scaleY(.5);
				background: #C5C6C8;
				bottom: 0;
			 }
			.mainInfo button{
				font-size: 0.12rem;
				padding: 4px 8px;
			}
			.follow{
				background-color: white;
				margin: 15px 0;
				text-align: center;
				display: flex;
				align-items: center;
				height: 60px;
				line-height: 1.5;
				justify-content: space-around;
			}
			.follow>div{
				flex-grow:1;
			}
			.fchidl b{
				font-weight: 100;
				font-size: .16rem;
			}
			.fchidl>div{
				color: darkgray;
			}
			.chidlL{
				border-right: 1px solid #EEEEEE;
			}
			.fft{
				margin: 0;
			}
			
			 #mainpic { 
			 	-webkit-column-count: 2;
			 	-moz-column-count: 2;
			 	column-count: 2;
			 	-moz-column-gap: 10px;
			 	-webkit-column-gap: 10px;
			 	column-gap:10px;
			 	padding: 10px;
			 }
			 
			 .boxf {
			 	border:none; 
			 	margin-bottom: 10px;
			 	cursor: pointer;
			 }
			 
			 .boxf img {
			 	width: 100%;
			 	vertical-align: top;
			 	border-radius: 2px;
			 }
			 
			 @media (min-width: 600px) {
			 	#mainpic {
			 		-webkit-column-count: 5;
			 		-moz-column-count: 5;
			 		column-count: 5;
			 	}
			 }
			 
			 @media (min-width: 1000px) {
			 	#mainpic {
			 		-webkit-column-count: 7;
			 		-moz-column-count: 7;
			 		column-count: 7;
			 	}
			 }
	</style>

	<body>

		<header id="header" class="mui-bar mui-bar-transparent">
			<a class="mui-action-back mui-icon mui-icon-left-nav mui-pull-left"></a>
			<h1 class="mui-title">个人主页</h1>
		</header>
		<script src="../js/statusBar.js"></script>
		<!--状态栏-->
		<!--<div id="container">-->
		<div id="main">
			<div class="clearfloat box-s box-ss" id="userBox">
	    		<img id="mypic1" src="../img/morentouxiang.jpg"/>
	    		<div id="beijing2"></div> 
	    			<img src="../img/market/atcenter.jpg" class="userAvator"/> 
	    	</div>
	    	<div class="content">
	    		<div class="mainInfo">
	    			<h4>扉页 <img src="../img/woman.svg" alt="" style="width: 0.15rem;"/></h4>
	    			<button type="button" class="mui-btn mui-btn-danger mui-btn-outlined editPage">
						编辑个人信息
					</button>
	    		</div> 
	    		<div class="follow fft">
					<div class="fchidl">
						<b>4</b>
						<div>点赞</div>
					</div>
					<div class="fchidl">
						<b>7</b>
						<div>被点赞</div>
					</div><div class="fchidl">
						<b>4</b>
						<div>评论</div>
					</div>
					<div class="fchidl">
						<b>7</b>
						<div>被评论</div>
					</div>
				</div>
	    	</div>

		</div>
		<div class="follow">
			<div class="fchidl chidlL">
				<b>4</b>
				<div>关注</div>
			</div>
			<div class="fchidl">
				<b>7</b>
				<div>被关注</div>
			</div>
		</div>
		<p><small>7个帖子</small></p>
		 <div id="mainpic">
				<div class="boxf" onclick="findInfo()">
					<div class="pic">
						<img src="../img/market/m1.jpg">
						 
					</div>
					  
				</div>
				<div class="boxf">
					<div class="pic">
						<img src="../img/market/mainad.png">
						
					</div>
				</div>
				<!-- 这里省略多个class为box的div-->
				<div class="boxf">
					<div class="pic">
						<img src="../img/market/market-cloth.jpg">
						 
					</div>
				</div>
				<div class="boxf">
					<div class="pic">
						<img src="../img/market/m3.jpg">
						
					</div>
				</div>
				<div class="boxf">
					<div class="pic">
						<img src="../img/market/mainad22.png">
						
					</div>
				</div>
				<div class="boxf">
					<div class="pic">
						<img src="../img/market/mainda2.jpg">
						
					</div>
				</div>
				 
				<div class="boxf">
					<div class="pic">
						<img src="../img/market/feg3.png">
						
					</div>
				</div>
				<div class="boxf">
					<div class="pic">
						<img src="../img/market/hbe.png">
						
					</div>
				</div>
				<div class="boxf">
					<div class="pic">
						<img src="../img/market/mainad.png">
						
					</div>
				</div>
				<!-- 这里省略多个class为box的div-->
				<div class="boxf">
					<div class="pic">
						<img src="../img/market/market-cloth.jpg">
						
					</div>
				</div>
				<div class="boxf">
					<div class="pic">
						<img src="../img/market/m3.jpg">
						
					</div>
				</div>
				<div class="boxf">
					<div class="pic">
						<img src="../img/market/mainad22.png">
						
					</div>
				</div>
				<div class="boxf">
					<div class="pic">
						<img src="../img/market/hbe.png">
						
					</div>
				</div>
				<div class="boxf">
					<div class="pic">
						<img src="../img/market/mainad.png">
						
					</div>
				</div>
				<!-- 这里省略多个class为box的div-->
				<div class="boxf">
					<div class="pic">
						<img src="../img/market/market-cloth.jpg">
						
					</div>
				</div>
			</div>
		
	</body>

	<script type="text/javascript">
	
	   //编辑个人主页
		 mui('.editPage')[0].addEventListener('tap',function(){
			 
				openview({
					view:'personal/setup.html' 
				});
			 
		});
	    
	    
	    //帖子 详情
	    function findInfo(){
    		openview({
				view: "find/findInfo.html",
				extrasobj: {
					userId: 1
				}
			})
    	}
	    
	    //关注 粉丝 
	    $(".fchidl:first-child").on("tap",function(){
	    	openview({
					view:'find/follow.html' 
				});
	    })
		$(".fchidl:last-child").on("tap",function(){
	    	openview({
					view:'find/followed.html' 
				});
	    })
		//图片上传文件方法	
		function previewImage(file) {
			var MAXWIDTH = 350;
			var MAXHEIGHT = 249;
			var div = findPreview(file.parentNode);
			if(file.files && file.files[0]) {
				filepic = file.files[0];
				div.innerHTML = '<img id=imghead>';
				var img = div.lastChild;
				img.onload = function() {
					var rect = clacImgZoomParam(MAXWIDTH, MAXHEIGHT, img.offsetWidth, img.offsetHeight);
					img.width = rect.width;
					img.height = rect.height;
				}
				var reader = new FileReader();
				reader.onload = function(evt) {
					img.src = evt.target.result;
				}
				reader.readAsDataURL(file.files[0]);
			}
		}

		function clacImgZoomParam(maxWidth, maxHeight, width, height) {
			var param = {
				top: 0,
				left: 0,
				width: width,
				height: height
			};
			if(width > maxWidth || height > maxHeight) {
				rateWidth = width / maxWidth;
				rateHeight = height / maxHeight;

				if(rateWidth > rateHeight) {
					param.width = maxWidth;
					param.height = Math.round(height / rateWidth);
				} else {
					param.width = Math.round(width / rateHeight);
					param.height = maxHeight;
				}
			}
			param.left = Math.round((maxWidth - param.width) / 2);
			param.top = Math.round((maxHeight - param.height) / 2);
			return param;
		}

		function findPreview(parent) {
			var childs = parent.childNodes;
			for(var i = 0; i < childs.length; i++) {
				if(childs[i].id == "preview")
					return childs[i];
			}
			return div = document.getElementById('preview');
		}
		
		
		
//		//发送 发布
//		mui('.baocun')[0].addEventListener('tap',function(){ 
////			plus.nativeUI.showWaiting('发送中 ...',{width:'100px',height:'80px'});
//			var text = $('.disbg').text() || null;
//			alert(text) 
//			var touxiang = mui('#imgUpload')[0].files[0] || {};
//			alert(touxiang.length)
//			mui.plusReady(function(){ 
//				var myuserid = plus.storage.getItem('userid');
//				var oldtoken = plus.storage.getItem('oldToken');
//				 
//				function upfun1(){
//					var fd = new FormData(); 
//					if(touxiang.name){
//						fd.append('avatar',touxiang);
//					}else{
//						alert(5)
//					}
////			        fd.append('userid',myuserid);  		
////			        fd.append('nickname',mynickname);  		
////			        fd.append('gender',Nextbtnval[Nextbtnval.length-1]);  		
////			        fd.append('IDCard',IDnum);  		
////			        var xhr = new XMLHttpRequest();  	
////			        xhr.open('POST',serverUrl+'/api/useraccount/updateuserdata',true); 	
////			    	xhr.onreadystatechange = function(){
////			    		if (xhr.readyState===4) { 
////	    					if (xhr.status===200) {
////	    						plus.nativeUI.closeWaiting();//关闭等待框
////	    						var dataobj = JSON.parse(xhr.responseText);
////	    						console.log('修改'+xhr.responseText);
////	    						if(dataobj.errno == 0){
////	    							mui.toast('修改成功');	 
////	    							//触发跳转页面刷新
////									mui.fire(plus.webview.getWebviewById('center.html'),'refresh');
////									if(plus.webview.getWebviewById('market-order')){ 
////										mui.fire(plus.webview.getWebviewById('market-order'),'refresh2');
////									}
////									var time2 = setTimeout(function(){
////										plus.webview.currentWebview().close();
////									},500)
////	    						}else{
////	    							mui.toast('保存失败');	
////	    						}
////	    					}else{
////	    						mui.toast('响应失败');	
////	    					}
////	    				}
////			        } 
////			        xhr.setRequestHeader("token",oldtoken);
////			        xhr.send(fd);
//				}
//			})
//		})
	</script>

</html>