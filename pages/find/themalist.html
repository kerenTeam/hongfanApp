<!DOCTYPE html>
<html lang="zh-CN">

	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
		<title>专题</title>
		<meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no, width=device-width">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-touch-fullscreen" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">
		<meta name="format-detection" content="telephone=no">
		<meta name="format-detection" content="address=no">
		<link rel="stylesheet" type="text/css" href="../../css/common.css"> 
		<link rel="stylesheet" type="text/css" href="../../css/mui.min.css" />
		<link rel="stylesheet" href="../../css/reset.css"> 
		
		<style type="text/css">
			 
			 .fTxt{
			 	font-size: 0.11rem;
			 	padding: 5px;
			 	color: rgba(0,0,0,0.8);
			 	height: 0.32rem;
			 	letter-spacing: 1px;
			 	line-height: 1.2;
			 	/*超出两行省略*/
			 	display: -webkit-box;
				-webkit-box-orient: vertical;
				-webkit-line-clamp: 2;
				overflow: hidden;

			 }
			 .findUser{
			 	padding: 5px;
			 }
			 .findUser img{
			 	width: 0.3rem!important;
			 	height: 0.3rem;
			 	border-radius: 50%!important;
			 	margin-right: 5px;
			 	/*vertical-align: middle!important;*/
			 } 
			 .findUser span{
			 	color: rgba(0,0,0,0.6);
			 	line-height: 0.3rem;
			 }
			 #mainpic {
			 	/*background-color: rgba(255,255,255,0.7);*/
			 	-webkit-column-count: 2;
			 	-moz-column-count: 2;
			 	column-count: 2;
			 	-moz-column-gap: 10px;
			 	-webkit-column-gap: 10px;
			 	column-gap:10px;
			 	padding: 10px;
			 }
			 
			 .boxf {
			 	-webkit-column-break-inside: avoid;
			 	border:none; 
			 	margin-bottom: 10px;
			 	cursor: pointer;
			 	background-color: #fff;
			 	border-radius: 2px;
			 }
			 
			 .boxf img {
			 	width: 100%;
			 	vertical-align: top;
			 	border-radius: 2px;
			 }
			 
			 @media (min-width: 600px) {
			 	#mainpic {
			 		-webkit-column-count: 5;
			 		-moz-column-count: 5;
			 		column-count: 5;
			 	}
			 }
			 
			 @media (min-width: 1000px) {
			 	#mainpic {
			 		-webkit-column-count: 7;
			 		-moz-column-count: 7;
			 		column-count: 7;
			 	}
			 }
		</style>
	</head>

	<body>
		<header class="mui-bar mui-bar-nav" id="header"> 
		    <a class="mui-action-back mui-icon mui-icon-left-nav mui-pull-left bigSize"></a>
		    <h1 class="mui-title">专题</h1>
		</header>
		<script src="../../js/statusBar.js"></script><!--状态栏-->
		<div id="nulldiv" style="padding-top: 50%;text-align:center;font-size: 14px;color: #999;display: none;">
			<img style="width: 30%;margin-bottom: 5%; " src="../../img/unllfabu.svg"/>
			<br />
			没有可用信息
		</div>
		<div id="main">
	 		<div id="mainpic" style="display: block;">
				<!--<div class="boxf" onclick="findInfo()">
					<div class="pic">
						<img src="../../img/market/m1.jpg">
						<p class="fTxt">
							美容彩妆会场，惺惺惜惺惺想
						</p>
						<div class="findUser">
							<img src="../../img/market/market-food.jpg" alt="" /><span>gun's N rose</span> 
						</div>
					</div>
				</div>-->
			</div>
			<script type="text/html" id="infolist"> 
				<% for(var i=0,leni=list.length; i<leni; i++){%>
					<div class="boxf" onclick="findInfo()">
						<div class="pic"> 
							<% if(list[i].pic.indexOf('http')>-1){%>
								<img src="<%= list[i].pic%>" onerror="this.src = '../../img/zhaoxiangji.svg'">
							<% }else{%>
								<img src="<%= url+list[i].pic%>" onerror="this.src = '../../img/zhaoxiangji.svg'"><!--<img src="../../img/market/m1.jpg">-->
							<% }%>	
							
							<p class="fTxt"><%= list[i].content%></p>
							<div class="findUser">
								<img src="<%= url+list[i].avatar%>" onerror="this.src = '../../img/zhaoxiangji.svg'" /><span><%= list[i].nickname%></span> 
							</div>
						</div>
					</div>
				<% }%>	
			</script> 
		</div>	
	</body>
<script type="text/javascript" src="../../js/jquery.min.js"></script>  
<script src="../../js/mui.min.js"></script> 
<script src="../../js/app.js"></script>
<!--引入模板引擎-->
<script src="../../js/artTemplate-native.js"></script>	
<script type="text/javascript">
	mui.plusReady(function(){
		var oldtoken = plus.storage.getItem('oldToken');
		var myuserid = plus.storage.getItem('userid');
		var q_id = plus.webview.currentWebview().qid;
		plus.nativeUI.showWaiting('加载中 ...',{width:'100px',height:'80px'});
		mui.ajax(serverUrl+'/api/news/actnewslist',{//请求id列表
			data:{"q_id":q_id},
			dataType:'json',
			type:'post',
			timeout:10000,
			headers:{"token":oldtoken},
			success:function(data,type,xhr){
				console.log('专题返回',data);
				if(data.errno==0){
					var dataobj = {};
					if(data.data.length){
						mui.each(data.data,function (index,element) {
							if(element.pic){
								if(element.pic.indexOf('http') == -1){
									element.pic = JSON.parse(element.pic)[0].picImg;
									console.log(element.pic); 
								}
							}
							if(element.avatar){ 
								element.avatar = JSON.parse(element.avatar)[0].picImg;	
							}
						})
						dataobj.list = data.data;
						dataobj.url = serverimgUrl;
						mui('#mainpic')[0].innerHTML = template('infolist',dataobj);
					}else{
						mui('#nulldiv')[0].style.display = 'block';
					}
				}else{
					mui('#nulldiv')[0].style.display = 'block';
					mui.toast('当前网络不好，请重试！');	
				}
				plus.nativeUI.closeWaiting();
			},
			error:function(xhr,type,errorThrown){
				plus.nativeUI.closeWaiting();
				mui('#nulldiv')[0].style.display = 'block';
				mui.toast('当前网络不好，请重试！');
				console.log('登录响应失败');
			}
		});
	})	
	
	function findInfo(){
		openview({
			view: "findInfo.html",
			extrasobj: {
				userId: 1
			}
		})
	}
 
</script>
</html> 